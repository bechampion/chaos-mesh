"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var Xt=Object.defineProperty;var N=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Zt=(e,t)=>{for(var r in t)Xt(e,r,{get:t[r],enumerable:!0})};var q={ANGULAR:"angular",AXIOS:"axios",AXIOS_FUNCTIONS:"axios-functions",REACT_QUERY:"react-query",SVELTE_QUERY:"svelte-query",VUE_QUERY:"vue-query"},dn= exports.OutputMode ={SINGLE:"single",SPLIT:"split",TAGS:"tags",TAGS_SPLIT:"tags-split"},V= exports.Verbs ={POST:"post",PUT:"put",GET:"get",PATCH:"patch",DELETE:"delete",HEAD:"head"},oe= exports.GetterPropType ={PARAM:"param",BODY:"body",QUERY_PARAM:"queryParam",HEADER:"header"},Ze= exports.SchemaType ={integer:"integer",number:"number",string:"string",boolean:"boolean",object:"object",null:"null",array:"array",enum:"enum",unknown:"unknown"};var er=["number","string","null","unknown","undefined","object","blob"],pe= exports.generalJSTypesWithArray =er.reduce((e,t)=>(e.push(t,`Array<${t}>`,`${t}[]`),e),[]),et= exports.VERBS_WITH_BODY =[V.POST,V.PUT,V.PATCH,V.DELETE],hn= exports.URL_REGEX =/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/;var _lodashisempty = require('lodash.isempty'); var _lodashisempty2 = _interopRequireDefault(_lodashisempty);var _esutils = require('esutils');var _isURL = require('validator/lib/isURL'); var _isURL2 = _interopRequireDefault(_isURL);var b={};Zt(b,{basename:()=>dr,dirname:()=>fr,extname:()=>Fe,getSchemaFileName:()=>br,getSpecName:()=>hr,isAbsolute:()=>gr,join:()=>ur,joinSafe:()=>ce,normalizeSafe:()=>le,relativeSafe:()=>yr,resolve:()=>Ne,separator:()=>ft});var _path = require('path'); var _path2 = _interopRequireDefault(_path);var me=e=>e.toLowerCase().includes(".yaml")||e.toLowerCase().includes(".yml")?"yaml":"json";var _chalk = require('chalk'); var _chalk2 = _interopRequireDefault(_chalk);var _esbuild = require('esbuild');var _fs = require('fs'); var _fs2 = _interopRequireDefault(_fs);var _globby = require('globby'); var _globby2 = _interopRequireDefault(_globby);var _micromatch = require('micromatch'); var _micromatch2 = _interopRequireDefault(_micromatch);var _debug = require('debug'); var _debug2 = _interopRequireDefault(_debug);var tt=process.env.ORVAL_DEBUG_FILTER,rr=process.env.DEBUG;function rt(e,t={}){let r=_debug2.default.call(void 0, e),{onlyWhenFocused:s}=t,n=typeof s=="string"?s:e;return(o,...a)=>{tt&&!o.includes(tt)||s&&!_optionalChain([rr, 'optionalAccess', _2 => _2.includes, 'call', _3 => _3(n)])||r(o,...a)}}var _readline = require('readline'); var _readline2 = _interopRequireDefault(_readline);var F=console.log,Rn= exports.startMessage =({name:e,version:t,description:r})=>F(`\u{1F37B} Start ${_chalk2.default.cyan.bold(e)} ${_chalk2.default.green(`v${t}`)}${r?` - ${r}`:""}`),vn= exports.errorMessage =e=>F(_chalk2.default.red(e)),Mn= exports.mismatchArgsMessage =e=>F(_chalk2.default.yellow(`${e.join(", ")} ${e.length===1?"is":"are"} not defined in your configuration!`)),Gn= exports.createSuccessMessage =e=>F(`\u{1F389} ${e?`${_chalk2.default.green(e)} - `:""}Your OpenAPI spec has been converted into ready to use orval!`),at= exports.ibmOpenapiValidatorWarnings =e=>{F(_chalk2.default.yellow("(!) Warnings")),e.forEach(t=>F(_chalk2.default.yellow(`Message : ${t.message}
Path    : ${t.path}`)))},it= exports.ibmOpenapiValidatorErrors =e=>{F(_chalk2.default.red("(!) Errors")),e.forEach(t=>F(_chalk2.default.red(`Message : ${t.message}
Path    : ${t.path}`)))},Ee= exports.LogLevels ={silent:0,error:1,warn:2,info:3},ot,st,Ce=0;function nr(){let e=process.stdout.rows-2,t=e>0?`
`.repeat(e):"";console.log(t),_readline2.default.cursorTo(process.stdout,0,0),_readline2.default.clearScreenDown(process.stdout)}function H(e="info",t={}){let{prefix:r="[vite]",allowClearScreen:s=!0}=t,n=Ee[e],o=s&&process.stdout.isTTY&&!process.env.CI?nr:()=>{};function a(p,c,l={}){if(n>=Ee[p]){let u=p==="info"?"log":p,f=()=>{if(l.timestamp){let d=p==="info"?_chalk2.default.cyan.bold(r):p==="warn"?_chalk2.default.yellow.bold(r):_chalk2.default.red.bold(r);return`${_chalk2.default.dim(new Date().toLocaleTimeString())} ${d} ${c}`}else return c};p===ot&&c===st?(Ce++,o(),console[u](f(),_chalk2.default.yellow(`(x${Ce+1})`))):(Ce=0,st=c,ot=p,l.clear&&o(),console[u](f()))}}let m=new Set,i={hasWarned:!1,info(p,c){a("info",p,c)},warn(p,c){i.hasWarned=!0,a("warn",p,c)},warnOnce(p,c){m.has(p)||(i.hasWarned=!0,a("warn",p,c),m.add(p))},error(p,c){i.hasWarned=!0,a("error",p,c)},clearScreen(p){n>=Ee[p]&&o()}};return i}var j=(e="",{backupFilename:t="filename",extension:r=".ts"}={})=>{let s=ct(e),n=s?_path.join.call(void 0, e,t+r):e,o=n.replace(/\.[^/.]+$/,""),a=_path.dirname.call(void 0, n),m=_path.basename.call(void 0, n,r[0]!=="."?`.${r}`:r);return{path:n,pathWithoutExtension:o,extension:r,isDirectory:s,dirname:a,filename:m}},pt=rt("orval:file-load"),De=new Map;async function mt(e,t){let{root:r=process.cwd(),isDefault:s=!0,defaultFileName:n,logLevel:o,alias:a,tsconfig:m,load:i=!0}=_nullishCoalesce(t, () => ({})),p=Date.now(),c,l=!1,u=!1;if(e)c=_path.resolve.call(void 0, e),l=e.endsWith(".ts");else if(n){let y=_path.resolve.call(void 0, r,`${n}.js`);if(_fs2.default.existsSync(y)&&(c=y),!c){let g=_path.resolve.call(void 0, r,`${n}.mjs`);_fs2.default.existsSync(g)&&(c=g,u=!0)}if(!c){let g=_path.resolve.call(void 0, r,`${n}.ts`);_fs2.default.existsSync(g)&&(c=g,l=!0)}}c||(e?H(o).error(_chalk2.default.red(`File not found => ${e}`)):n?H(o).error(_chalk2.default.red(`File not found => ${n}.{js,mjs,ts}`)):H(o).error(_chalk2.default.red("File not found")),process.exit(1));let f=le(c),d=De.get(c);if(d)return{path:f,...d,cached:!0};try{let y;if(!y&&!l&&!u)try{delete N.cache[N.resolve(c)],y=N(c),pt(`cjs loaded in ${Date.now()-p}ms`)}catch(g){if(!new RegExp(["Cannot use import statement","Must use import to load ES Module","Unexpected token","Unexpected identifier"].join("|")).test(g.message))throw g}if(!y){let{code:g}=await mr(c,u,r||_path.dirname.call(void 0, f),a,_optionalChain([m, 'optionalAccess', _4 => _4.compilerOptions]));i?y=await cr(c,g,s):y=g,pt(`bundled file loaded in ${Date.now()-p}ms`)}return De.set(c,{file:y}),{path:f,file:y}}catch(y){return De.set(c,{error:y}),{path:f,error:y}}}async function mr(e,t=!1,r,s,n){let o=await _esbuild.build.call(void 0, {absWorkingDir:process.cwd(),entryPoints:[e],outfile:"out.js",write:!1,platform:"node",bundle:!0,format:t?"esm":"cjs",sourcemap:"inline",metafile:!0,target:"es6",minifyWhitespace:!0,plugins:[...s||_optionalChain([n, 'optionalAccess', _5 => _5.paths])?[{name:"aliasing",setup(m){m.onResolve({filter:/^[\w@][^:]/},async({path:i})=>{if(s){let p=Object.keys(s),c=p.find(l=>i.startsWith(l)||_micromatch2.default.isMatch(i,p));if(c){let l=_micromatch2.default.scan(c),u=_micromatch2.default.scan(s[c]),f=_path.resolve.call(void 0, r,u.base),d=l.base?i.replace(l.base,f):ce(f,i),g=_path.extname.call(void 0, d)?d:`${d}.ts`;return _fs2.default.existsSync(g)?{path:g}:void 0}}if(_optionalChain([n, 'optionalAccess', _6 => _6.paths])){let p=Object.keys(_optionalChain([n, 'optionalAccess', _7 => _7.paths])),c=p.find(l=>i.startsWith(l)||_micromatch2.default.isMatch(i,p));if(c){let l=_micromatch2.default.scan(c),u=_micromatch2.default.scan(_optionalChain([n, 'optionalAccess', _8 => _8.paths, 'access', _9 => _9[c], 'access', _10 => _10[0]])),f=_path.resolve.call(void 0, r,u.base),d=l.base?i.replace(l.base,f):ce(f,i),g=_path.extname.call(void 0, d)?d:`${d}.ts`;return _fs2.default.existsSync(g)?{path:g}:void 0}}})}}]:[],{name:"externalize-deps",setup(m){m.onResolve({filter:/.*/},i=>{let p=i.path;if(p[0]!=="."&&!_path.isAbsolute.call(void 0, p))return{external:!0}})}},{name:"replace-import-meta",setup(m){m.onLoad({filter:/\.[jt]s$/},async i=>{let p=await _fs2.default.promises.readFile(i.path,"utf8");return{loader:i.path.endsWith(".ts")?"ts":"js",contents:p.replace(/\bimport\.meta\.url\b/g,JSON.stringify(`file://${i.path}`)).replace(/\b__dirname\b/g,JSON.stringify(_path.dirname.call(void 0, i.path))).replace(/\b__filename\b/g,JSON.stringify(i.path))}})}}]}),{text:a}=o.outputFiles[0];return{code:a,dependencies:o.metafile?Object.keys(o.metafile.inputs):[]}}async function cr(e,t,r){let s=_path.extname.call(void 0, e),n=N.extensions[s];N.extensions[s]=(m,i)=>{i===e?m._compile(t,i):n(m,i)},delete N.cache[N.resolve(e)];let o=N(e),a=r&&o.__esModule?o.default:o;return N.extensions[s]=n,a}async function Bn(e,t){let r=await _globby2.default.call(void 0, e,{cwd:t,absolute:!0});await Promise.all(r.map(s=>_fs2.default.promises.unlink(s)))}var U={},lr=e=>typeof e=="function",ut=e=>typeof e=="string"?!0:typeof e=="object"&&e!==null?Object.toString.call(e)=="[object String]":!1;Object.entries(_path2.default).forEach(([e,t])=>{lr(t)?U[e]=(r=>(...s)=>{s=s.map(o=>ut(o)?ue(o):o);let n=_path2.default[r](...s);return ut(n)?ue(n):n})(e):U[e]=t});var{join:ur,resolve:Ne,extname:Fe,dirname:fr,basename:dr,isAbsolute:gr}=U;var yr=(e,t)=>{let r=U.relative(e,t);return le(`.${ft}${r}`)},hr=(e,t)=>{if(fe(e)){let r=new URL(t);return e.replace(r.origin,"").replace(j(r.pathname).dirname,"").replace(`.${me(e)}`,"")}return"/"+U.normalize(U.relative(j(t).dirname,e)).split("../").join("").replace(`.${me(e)}`,"")},br=e=>e.replace(`.${me(e)}`,"").slice(e.lastIndexOf("/")+1),ft="/",ue=function(e){return e=e.replace(/\\/g,"/"),e=e.replace(/(?<!^)\/+/g,"/"),e},le=e=>{let t;return e=ue(e),t=U.normalize(e),e.startsWith("./")&&!t.startsWith("./")&&!t.startsWith("..")?t="./"+t:e.startsWith("//")&&!t.startsWith("//")&&(e.startsWith("//./")?t="//."+t:t="/"+t),t},ce=function(...e){let t=U.join(...e);if(e.length>0){let r=ue(e[0]);r.startsWith("./")&&!t.startsWith("./")&&!t.startsWith("..")?t="./"+t:r.startsWith("//")&&!t.startsWith("//")&&(r.startsWith("//./")?t="//."+t:t="/"+t)}return t};var T=e=>Boolean(e.$ref),ct= exports.isDirectory =e=>!Fe(e);function C(e){return Object.prototype.toString.call(e)==="[object Object]"}function dt(e){return Object.prototype.toString.call(e)==="[object Module]"}function k(e){return typeof e=="string"}function gt(e){return typeof e=="number"}function yt(e){return/^-?\d+$/.test(e)}function se(e){return typeof e=="boolean"}function ht(e){return typeof e=="function"}function ae(e){return typeof e>"u"}function bt(e){return typeof e===null}function Jn(e){if(!C(e))return!1;if(k(e.type)&&Object.values(Ze).includes(e.type))return!0;let t=e.allOf||e.anyOf||e.oneOf;return!!(Array.isArray(t)||C(e.properties))}var Ot=e=>Object.values(V).includes(e),Yn= exports.isRootKey =(e,t)=>e===t,xr=/^https?:\/\/\w+(\.\w+)*(:[0-9]+)?(\/.*)?$/,fe= exports.isUrl =e=>_isURL2.default.call(void 0, e)||xr.test(e);async function xt(e,t,r){let s=typeof r=="object"?Object.create(r):r;for(let n of e)s=await t(s,n);return s}var We=function(e,t){return t=t||"",e.replace(/(^|-)/g,"$1\\u"+t).replace(/,/g,"\\u"+t)},de=We("20-26,28-2F,3A-40,5B-60,7B-7E,A0-BF,D7,F7","00"),ge="a-z"+We("DF-F6,F8-FF","00"),ie="A-Z"+We("C0-D6,D8-DE","00"),Sr="A|An|And|As|At|But|By|En|For|If|In|Of|On|Or|The|To|Vs?\\.?|Via",z={capitalize:new RegExp("(^|["+de+"])(["+ge+"])","g"),pascal:new RegExp("(^|["+de+"])+(["+ge+ie+"])","g"),fill:new RegExp("["+de+"]+(.|$)","g"),sentence:new RegExp('(^\\s*|[\\?\\!\\.]+"?\\s+"?|,\\s+")(['+ge+"])","g"),improper:new RegExp("\\b("+Sr+")\\b","g"),relax:new RegExp("([^"+ie+"])(["+ie+"]*)(["+ie+"])(?=[^"+ie+"]|$)","g"),upper:new RegExp("^[^"+ge+"]+$"),hole:/[^\s]\s[^\s]/,apostrophe:/'/g,room:new RegExp("["+de+"]")},$r=e=>e.replace(z.apostrophe,""),St=String.prototype.toUpperCase,Ve=String.prototype.toLowerCase,ye=(e,t,r=!1)=>(t!=null&&(e=e.replace(z.fill,function(s,n){return n?t+n:""})),r&&(e=$r(e)),e),jr=(e,t=0)=>Ve.call(e.charAt(t))+e.slice(t+1),Rr=(e,t,r,s)=>t+" "+(r?r+" ":"")+s,Be=(e,t=!1,r=!1,s=!1)=>{if(e=e==null?"":e+"",!s&&z.upper.test(e)&&(e=Ve.call(e)),!t&&!z.hole.test(e)){var n=ye(e," ");z.hole.test(n)&&(e=n)}return!r&&!z.room.test(e)&&(e=e.replace(z.relax,Rr)),e},$t=(e,t,r)=>ye(Ve.call(Be(e,!!t)),t,r),h= exports.pascal =e=>{let t=_optionalChain([e, 'optionalAccess', _11 => _11.startsWith, 'call', _12 => _12("_")]),r=ye(Be(e,!1,!0).replace(z.pascal,(s,n,o)=>St.call(o)),"",!0);return t?`_${r}`:r},O= exports.camel =e=>{let t=_optionalChain([e, 'optionalAccess', _13 => _13.startsWith, 'call', _14 => _14("_")]),r=jr(h(e),t?1:0);return t?`_${r}`:r},eo= exports.snake =e=>$t(e,"_",!0),he= exports.kebab =e=>$t(e,"-",!0),to= exports.upper =(e,t,r)=>ye(St.call(Be(e,!!t,!1,!0)),t,r);var _compareversions = require('compare-versions');var be=(e,t,r=">=")=>e==="latest"?!0:_compareversions.compare.call(void 0, e.replace(/(\s(.*))/,""),t,r);var Mr="\\*/",qe="*\\/",Ue=new RegExp(Mr,"g");function w({description:e,deprecated:t,summary:r},s=!1){let n=(Array.isArray(e)?e.filter(p=>!p.includes("eslint-disable")):[e||""]).map(p=>p.replace(Ue,qe)),o=[e,t,r].reduce((p,c)=>c?p+1:p,0);if(!o)return"";let a=o===1&&s,m=Array.isArray(e)?_optionalChain([e, 'access', _15 => _15.find, 'call', _16 => _16(p=>p.includes("eslint-disable")), 'optionalAccess', _17 => _17.replace, 'call', _18 => _18(Ue,qe)]):void 0,i=`${m?`/* ${m} */
`:""}/**`;return e&&(a||(i+=`
${s?"  ":""} *`),i+=` ${n.join(`
 * `)}`),t&&(a||(i+=`
${s?"  ":""} *`),i+=" @deprecated"),r&&(a||(i+=`
${s?"  ":""} *`),i+=` @summary ${r.replace(Ue,qe)}`),i+=a?" ":`
 ${s?"  ":""}`,i+=`*/
`,i}var jt=async(e,t=process.cwd(),r=!0)=>{if(!e)return e;try{if(k(e)){let n=await Promise.resolve().then(() => require(Ne(t,e)));return r&&(C(n)||dt(n))&&n.default?n.default:n}return Promise.resolve(e)}catch(s){throw`Oups... \u{1F37B}. Path: ${e} => ${s}`}};var Oe=e=>e&&typeof e=="object";function ze(e,t){return!Oe(t)||!Oe(e)?e:Object.entries(t).reduce((r,[s,n])=>{let o=r[s];return Array.isArray(o)&&Array.isArray(n)?r[s]=[...o,...n]:Oe(o)&&Oe(n)?r[s]=ze(o,n):r[s]=n,r},Object.assign({},e))}var lo=(e="",t)=>e?(_nullishCoalesce(e.match(new RegExp(t,"g")), () => ([]))).length:0;var _swagger2openapi = require('swagger2openapi'); var _swagger2openapi2 = _interopRequireDefault(_swagger2openapi);var ho=async(e,t={},r)=>{try{return new Promise(s=>{!e.openapi&&e.swagger==="2.0"?_swagger2openapi2.default.convertObj(e,t,(n,o)=>{n?(F(_chalk2.default.yellow(`${r}
=> ${n}`)),s(e)):s(o.openapi)}):s(e)})}catch(s){throw`Oups... \u{1F37B}.
Path: ${r}
Parsing Error: ${s}`}};var Rt=e=>e.sort((t,r)=>t.default?1:r.default?-1:t.required&&r.required?0:t.required?-1:r.required?1:0);var _lodashget = require('lodash.get'); var _lodashget2 = _interopRequireDefault(_lodashget);var L=e=>{if(!(ae(e)||bt(e)))return k(e)?`'${e}'`:gt(e)||se(e)||ht(e)?`${e}`:Array.isArray(e)?`[${e.map(L).join(", ")}]`:Object.entries(e).reduce((t,[r,s],n,o)=>{let a=L(s);return o.length===1?`{ ${r}: ${a}, }`:n?o.length-1===n?t+`${r}: ${a}, }`:t+`${r}: ${a}, `:`{ ${r}: ${a}, `},"")},M= exports.sanitize =(e,t)=>{let{whitespace:r="",underscore:s="",dot:n="",dash:o="",es5keyword:a=!1,es5IdentifierName:m=!1,special:i=!1}=_nullishCoalesce(t, () => ({})),p=e;return i!==!0&&(p=p.replace(/[!"`'#%&,:;<>=@{}~\$\(\)\*\+\/\\\?\[\]\^\|]/g,"")),r!==!0&&(p=p.replace(/[\s]/g,r)),s!==!0&&(p=p.replace(/['_']/g,s)),n!==!0&&(p=p.replace(/[.]/g,n)),o!==!0&&(p=p.replace(/[-]/g,o)),a&&(p=_esutils.keyword.isKeywordES5(p,!0)?`_${p}`:p),m&&(p.match(/^[0-9]/)?p=`N${p}`:p=_esutils.keyword.isIdentifierNameES5(p)?p:`_${p}`),p},jo= exports.toObjectString =(e,t)=>e.length?(t?e.map(s=>_lodashget2.default.call(void 0, s,t)):e).join(`,
    `)+",":"",Tr={0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine"},xe= exports.getNumberWord =e=>e.toString().split("").reduce((r,s)=>r+Tr[s],""),Le= exports.escape =(e,t="'")=>e.replace(t,`\\${t}`);var _=e=>e?!!(_nullishCoalesce(_optionalChain([e, 'optionalAccess', _19 => _19.compilerOptions, 'optionalAccess', _20 => _20.allowSyntheticDefaultImports]), () => (_optionalChain([e, 'optionalAccess', _21 => _21.compilerOptions, 'optionalAccess', _22 => _22.esModuleInterop])))):!0;var _ibmopenapivalidator = require('ibm-openapi-validator'); var _ibmopenapivalidator2 = _interopRequireDefault(_ibmopenapivalidator);var wo=async e=>{let{errors:t,warnings:r}=await _ibmopenapivalidator2.default.call(void 0, e);r.length&&at(r),t.length&&it(t)};var ee=(e,t,r)=>{let s=`export type ${t} = typeof ${t}[keyof typeof ${t}];
`,n=Se(e,r);return s+=`

`,s+=`// eslint-disable-next-line @typescript-eslint/no-redeclare
`,s+=`export const ${t} = {
${n}} as const;
`,s},Se= exports.getEnumImplementation =(e,t)=>[...new Set(e.split(" | "))].reduce((r,s,n)=>{let o=_optionalChain([t, 'optionalAccess', _23 => _23[n]]);if(o)return r+`  ${_esutils.keyword.isIdentifierNameES5(o)?o:`'${o}'`}: ${s},
`;let a=s.startsWith("'")?s.slice(1,-1):s;return yt(a)&&(a=Cr(a)),a.length>1&&(a=M(a,{whitespace:"_",underscore:!0,dash:!0,special:!0})),r+`  ${_esutils.keyword.isIdentifierNameES5(a)?a:`'${a}'`}: ${s},
`},""),Cr=e=>e[0]==="-"?`NUMBER_MINUS_${e.slice(1)}`:e[0]==="+"?`NUMBER_PLUS_${e.slice(1)}`:`NUMBER_${e}`;var Zo={schemas:"",responses:"Response",parameters:"Parameter",requestBodies:"Body"},Dr=new RegExp("~1","g"),kr=(e,t)=>{let r=new URL(t,new URL(e,"resolve://"));if(r.protocol==="resolve:"){let{pathname:s,search:n,hash:o}=r;return s+n+o}return r.toString()},te= exports.getRefInfo =(e,t)=>{let[r,s]=e.split("#"),n=_optionalChain([s, 'optionalAccess', _24 => _24.slice, 'call', _25 => _25(1), 'access', _26 => _26.split, 'call', _27 => _27("/"), 'access', _28 => _28.map, 'call', _29 => _29(i=>i.replace(Dr,"/"))]),o=n?_lodashget2.default.call(void 0, t.override,[...n.slice(0,2),"suffix"],""):"",a=s?n[n.length-1]:b.getSchemaFileName(r);if(!r)return{name:h(a)+o,originalName:a,refPaths:n};let m=fe(t.specKey)?kr(t.specKey,r):b.resolve(j(t.specKey).dirname,r);return{name:h(a)+o,originalName:a,specKey:m,refPaths:n}};var I=(e,t,r=[])=>{if(_optionalChain([e, 'optionalAccess', _30 => _30.schema, 'optionalAccess', _31 => _31.$ref])){let i=I(_optionalChain([e, 'optionalAccess', _32 => _32.schema]),t,r);return{schema:{...e,schema:i.schema},imports:r}}if(!T(e))return{schema:e,imports:r};let{name:s,originalName:n,specKey:o,refPaths:a}=te(e.$ref,t),m=a?_lodashget2.default.call(void 0, t.specs[o||t.specKey],a):t.specs[o||t.specKey];if(!m)throw`Oups... \u{1F37B}. Ref not found: ${e.$ref}`;return I(m,{...t,specKey:o||t.specKey},[...r,{name:s,specKey:o,schemaName:n}])};var A=({schema:e,name:t,context:r})=>{if(T(e)){let{schema:n,imports:o}=I(e,r),{name:a,specKey:m,schemaName:i}=o[0],p=m||(r.specKey!==r.target?r.specKey:void 0);return{value:a,imports:[{name:a,specKey:p,schemaName:i}],type:_optionalChain([n, 'optionalAccess', _33 => _33.type])||"object",schemas:[],isEnum:!!_optionalChain([n, 'optionalAccess', _34 => _34.enum]),originalSchema:n,isRef:!0}}return{...re({item:e,name:t,context:r}),originalSchema:e,isRef:!1}};var W=({schema:e,propName:t,combined:r=!1,context:s})=>{let n=A({schema:e,name:t,context:s}),o=w(_nullishCoalesce(n.originalSchema, () => ({})));if(t&&!n.isEnum&&_optionalChain([n, 'optionalAccess', _35 => _35.type])==="object"&&new RegExp(/{|&|\|/).test(n.value))return{value:t,imports:[{name:t}],schemas:[...n.schemas,{name:t,model:`${o}export type ${t} = ${n.value};
`,imports:n.imports}],isEnum:!1,type:"object",originalSchema:n.originalSchema,isRef:n.isRef};if(t&&n.isEnum&&!r&&!n.isRef){let a=ee(n.value,t,_optionalChain([n, 'access', _36 => _36.originalSchema, 'optionalAccess', _37 => _37["x-enumNames"]]));return{value:t,imports:[{name:t}],schemas:[...n.schemas,{name:t,model:o+a,imports:n.imports}],isEnum:!1,type:"enum",originalSchema:n.originalSchema,isRef:n.isRef}}return n};var Gt=({schema:e,name:t,context:r})=>{if(e.items){let s=W({schema:e.items,propName:t+"Item",context:r});return{value:s.value.includes("|")?`(${s.value})[]`:`${s.value}[]`,imports:s.imports,schemas:s.schemas,isEnum:!1,type:"array",isRef:!1}}else throw new Error("All arrays must have an `items` key define")};var _lodashuniqby = require('lodash.uniqby'); var _lodashuniqby2 = _interopRequireDefault(_lodashuniqby);var wt=["multipart/form-data"],Pt=["application/x-www-form-urlencoded"],Wr=({mediaType:e,propName:t,context:r})=>e.schema?W({schema:e.schema,propName:t,context:r}):void 0,ne= exports.getResReqTypes =(e,t,r,s="unknown")=>{let n=e.filter(([o,a])=>Boolean(a)).map(([o,a])=>{if(T(a)){let{schema:m,imports:[{name:i,specKey:p,schemaName:c}]}=I(a,r),[l,u]=_nullishCoalesce(Object.entries(_nullishCoalesce(m.content, () => ({})))[0], () => ([])),f=wt.includes(l),d=Pt.includes(l);if(!f&&!d||!_optionalChain([u, 'optionalAccess', _38 => _38.schema]))return[{value:i,imports:[{name:i,specKey:p,schemaName:c}],schemas:[],type:"unknown",isEnum:!1,isRef:!0,originalSchema:_optionalChain([u, 'optionalAccess', _39 => _39.schema]),key:o,contentType:l}];let y=f?$e({name:i,schemaObject:_optionalChain([u, 'optionalAccess', _40 => _40.schema]),context:{...r,specKey:p||r.specKey},isRef:!0}):void 0,g=d?$e({name:i,schemaObject:_optionalChain([u, 'optionalAccess', _41 => _41.schema]),context:{...r,specKey:p||r.specKey},isUrlEncoded:!0,isRef:!0}):void 0;return[{value:i,imports:[{name:i,specKey:p,schemaName:c}],schemas:[],type:"unknown",isEnum:!1,formData:y,formUrlEncoded:g,isRef:!0,originalSchema:_optionalChain([u, 'optionalAccess', _42 => _42.schema]),key:o,contentType:l}]}return a.content?Object.entries(a.content).map(([i,p],c,l)=>{let u=o?h(t)+h(o):void 0;u&&l.length>1&&(u=u+h(xe(c+1)));let f=Wr({mediaType:p,propName:u,context:r});if(!f)return;let d=wt.includes(i),y=Pt.includes(i);if(!d&&!y||!u)return{...f,contentType:i};let g=d?$e({name:u,schemaObject:p.schema,context:r}):void 0,S=y?$e({name:u,schemaObject:p.schema,context:r,isUrlEncoded:!0}):void 0;return{...f,formData:g,formUrlEncoded:S,contentType:i}}).filter(i=>i).map(i=>({...i,key:o})):[{value:s,imports:[],schemas:[],type:s,isEnum:!1,key:o,isRef:!1,contentType:"application/json"}]});return _lodashuniqby2.default.call(void 0, n.flatMap(o=>o),"value")},$e=({name:e,schemaObject:t,context:r,isUrlEncoded:s,isRef:n})=>{let{schema:o,imports:a}=I(t,r),m=O(!n&&T(t)?a[0].name:e),i=s?"formUrlEncoded":"formData",p=s?`const ${i} = new URLSearchParams();
`:`const ${i} = new FormData();
`;if(o.type==="object"&&o.properties){let c=Object.entries(o.properties).reduce((l,[u,f])=>{let{schema:d}=I(f,r),y="",g=_esutils.keyword.isIdentifierNameES5(u)?`.${u}`:`['${u}']`;d.type==="object"?y=`${i}.append('${u}', JSON.stringify(${m}${g}));
`:d.type==="array"?y=`${m}${g}.forEach(value => ${i}.append('${u}', value));
`:d.type==="number"||d.type==="integer"||d.type==="boolean"?y=`${i}.append('${u}', ${m}${g}.toString())
`:y=`${i}.append('${u}', ${m}${g})
`;let S=_optionalChain([o, 'access', _43 => _43.required, 'optionalAccess', _44 => _44.includes, 'call', _45 => _45(u)]);return d.nullable?S?l+`if(${m}${g} !== null) {
 ${y} }
`:l+`if(${m}${g} !== undefined && ${m}${g} !== null) {
 ${y} }
`:S?l+y:l+`if(${m}${g} !== undefined) {
 ${y} }
`},"");return`${p}${c}`}return o.type==="array"?`${p}${m}.forEach(value => ${i}.append('data', value))
`:o.type==="number"||o.type==="boolean"?`${p}${i}.append('data', ${m}.toString())
`:`${p}${i}.append('data', ${m})
`};var Tt=({requestBody:e,operationName:t,context:r,contentType:s})=>{let n=ne([[r.override.components.requestBodies.suffix,e]],t,r),o=s?n.filter(c=>{let l=!0,u=!1;return s.include&&(l=s.include.includes(c.contentType)),s.exclude&&(u=s.exclude.includes(c.contentType)),l&&!u}):n,a=o.flatMap(({imports:c})=>c),m=o.flatMap(({schemas:c})=>c),i=o.map(({value:c})=>c).join(" | "),p=pe.includes(i.toLowerCase())||o.length>1?O(t)+r.override.components.requestBodies.suffix:O(i);return{definition:i,implementation:p,imports:a,schemas:m,...o.length===1?{formData:o[0].formData,formUrlEncoded:o[0].formUrlEncoded,contentType:o[0].contentType}:{formData:"",formUrlEncoded:"",contentType:""}}};var _lodashomit = require('lodash.omit'); var _lodashomit2 = _interopRequireDefault(_lodashomit);var je=e=>_esutils.keyword.isIdentifierNameES5(e)?e:`'${e}'`;var Et=({item:e,name:t,context:r,nullable:s})=>{if(T(e)){let{name:n,specKey:o}=te(e.$ref,r);return{value:n+s,imports:[{name:n,specKey:o}],schemas:[],isEnum:!1,type:"object",isRef:!0}}if(e.allOf||e.oneOf||e.anyOf){let n=e.allOf?"allOf":e.oneOf?"oneOf":"anyOf";return _e({schema:e,name:t,separator:n,context:r,nullable:s})}if(e.type instanceof Array)return _e({schema:{anyOf:e.type.map(n=>({type:n}))},name:t,separator:"anyOf",context:r,nullable:s});if(e.properties&&Object.entries(e.properties).length>0)return Object.entries(e.properties).reduce((n,[o,a],m,i)=>{let p=(Array.isArray(e.required)?e.required:[]).includes(o),c="";if(t){let g=o.startsWith("_");c+=h(`${g?"_":""}${t}_${o}`)}let l=_nullishCoalesce(_optionalChain([r, 'access', _46 => _46.specs, 'access', _47 => _47[r.target], 'optionalAccess', _48 => _48.components, 'optionalAccess', _49 => _49.schemas]), () => ({}));Object.keys(l).some(g=>h(g)===c)&&(c=c+"Property");let f=W({schema:a,propName:c,context:r}),d=e.readOnly||a.readOnly;m||(n.value+="{");let y=w(a,!0);if(n.imports.push(...f.imports),n.value+=`
  ${y?`${y}  `:""}${d?"readonly ":""}${je(o)}${p?"":"?"}: ${f.value};`,n.schemas.push(...f.schemas),i.length-1===m){if(e.additionalProperties)if(se(e.additionalProperties))n.value+=`
  [key: string]: any;
 }`;else{let g=A({schema:e.additionalProperties,name:t,context:r});n.value+=`
  [key: string]: ${g.value};
}`}else n.value+=`
}`;n.value+=s}return n},{imports:[],schemas:[],value:"",isEnum:!1,type:"object",isRef:!1,schema:{}});if(e.additionalProperties){if(se(e.additionalProperties))return{value:"{ [key: string]: any }"+s,imports:[],schemas:[],isEnum:!1,type:"object",isRef:!1};let n=A({schema:e.additionalProperties,name:t,context:r});return{value:`{[key: string]: ${n.value}}`+s,imports:_nullishCoalesce(n.imports, () => ([])),schemas:_nullishCoalesce(n.schemas, () => ([])),isEnum:!1,type:"object",isRef:!1}}return{value:e.type==="object"?"{ [key: string]: any }":"unknown"+s,imports:[],schemas:[],isEnum:!1,type:"object",isRef:!1}};var re=({item:e,name:t,context:r})=>{let s=e.nullable?" | null":"";switch(!e.type&&e.items&&(e.type="array"),e.type){case"number":case"integer":{let n="number",o=!1;return e.enum&&(n=e.enum.map(a=>`${a}`).join(" | "),o=!0),{value:n+s,isEnum:o,type:"number",schemas:[],imports:[],isRef:!1}}case"boolean":return{value:"boolean"+s,type:"boolean",isEnum:!1,schemas:[],imports:[],isRef:!1};case"array":{let{value:n,...o}=Gt({schema:e,name:t,context:r});return{value:n+s,...o}}case"string":{let n="string",o=!1;return e.enum&&(n=`'${e.enum.map(a=>k(a)?Le(a):`${a}`).filter(Boolean).join("' | '")}'`,o=!0),e.format==="binary"&&(n="Blob"),r.override.useDates&&(e.format==="date"||e.format==="date-time")&&(n="Date"),{value:n+s,isEnum:o,type:"string",imports:[],schemas:[],isRef:!1}}case"null":return{value:"null",isEnum:!1,type:"null",imports:[],schemas:[],isRef:!1};case"object":default:{if(e.enum)return{value:`'${e.enum.map(m=>k(m)?Le(m):`${m}`).filter(Boolean).join("' | '")}'`+s,isEnum:!0,type:"string",imports:[],schemas:[],isRef:!1};let{value:n,...o}=Et({item:e,name:t,context:r,nullable:s});return{value:n,...o}}}};var qr=({resolvedData:e,resolvedValue:t,separator:r})=>e.isEnum.every(n=>n)?`${e.values.join(" | ")}${t?` | ${t.value}`:""}`:r==="allOf"?`${e.values.join(" & ")}${t?` & ${t.value}`:""}`:t?`(${e.values.join(` & ${t.value}) | (`)} & ${t.value})`:e.values.join(" | "),_e= exports.combineSchemas =({name:e,schema:t,separator:r,context:s,nullable:n})=>{let o=_nullishCoalesce(t[r], () => ([])),a=o.reduce((c,l)=>{let u=e?e+h(r):void 0;u&&c.schemas.length&&(u=u+h(xe(c.schemas.length+1)));let f=W({schema:l,propName:u,combined:!0,context:s});return c.values.push(f.value),c.imports.push(...f.imports),c.schemas.push(...f.schemas),c.isEnum.push(f.isEnum),c.types.push(f.type),c.isRef.push(f.isRef),c.originalSchema.push(f.originalSchema),c},{values:[],imports:[],schemas:[],isEnum:[],isRef:[],types:[],originalSchema:[]}),m=a.isEnum.every(c=>c),i;t.properties&&(i=re({item:_lodashomit2.default.call(void 0, t,r),name:e,context:s}));let p=qr({resolvedData:a,separator:r,resolvedValue:i});if(m&&e&&o.length>1){let c=`

// eslint-disable-next-line @typescript-eslint/no-redeclare
export const ${h(e)} = ${Ur(a)}`;return{value:`typeof ${h(e)}[keyof typeof ${h(e)}] ${n};`+c,imports:a.imports.map(l=>({...l,values:!0})),schemas:a.schemas,isEnum:!1,type:"object",isRef:!1}}return{value:p+n,imports:i?[...a.imports,...i.imports]:a.imports,schemas:i?[...a.schemas,...i.schemas]:a.schemas,isEnum:!1,type:"object",isRef:!1}},Ur=({values:e,isRef:t,originalSchema:r})=>e.length===1?t[0]?e[0]:`{${Se(e[0])}} as const`:`{${e.map((n,o)=>{if(t[o])return`...${n},`;let a=_optionalChain([r, 'access', _50 => _50[o], 'optionalAccess', _51 => _51["x-enumNames"]]);return Se(n,a)}).join("")}} as const`;var Ct=(e,t)=>{let r={...e};for(let s of Object.values(r))if(_optionalChain([s, 'access', _52 => _52.discriminator, 'optionalAccess', _53 => _53.mapping])){let{mapping:n,propertyName:o}=s.discriminator;for(let[a,m]of Object.entries(n)){let i;try{let{name:p}=te(m,t);i=r[p]}catch (e2){i=r[m]}!i||(i.properties={...i.properties,[o]:{type:"string",enum:[a]}},i.required=[..._nullishCoalesce(i.required, () => ([])),o])}}return r};var It=(e,t,r)=>e.operationId?e.operationId:h([r,...t.split("/").map(s=>M(s,{dash:!0,underscore:"-",dot:"-",whitespace:"-"}))].join("-"));var Dt=({parameters:e=[],context:t})=>e.reduce((r,s)=>{if(T(s)){let{schema:n,imports:o}=I(s,t);(n.in==="path"||n.in==="query"||n.in==="header")&&r[n.in].push({parameter:n,imports:o})}else(s.in==="query"||s.in==="path"||s.in==="header")&&r[s.in].push({parameter:s,imports:[]});return r},{path:[],query:[],header:[]});var zr=e=>{let t,r=[],s=/\{(.*?)\}/g;for(;(t=s.exec(e))!==null;)r.push(t[1]);return r},kt= exports.getParams =({route:e,pathParams:t=[],operationId:r,context:s})=>zr(e).map(o=>{let a=t.find(({parameter:d})=>M(O(d.name),{es5keyword:!0,underscore:!0,dash:!0})===o);if(!a)throw new Error(`The path params ${o} can't be found in parameters (${r})`);let{name:m,required:i=!1,schema:p}=a.parameter,c=M(O(m),{es5keyword:!0});if(!p)return{name:c,definition:`${c}${i?"":"?"}: unknown`,implementation:`${c}${i?"":"?"}: unknown`,default:!1,required:i,imports:[]};let l=A({schema:p,context:{...s,...a.imports.length?{specKey:a.imports[0].specKey}:{}}}),u=`${c}${!i||l.originalSchema.default?"?":""}: ${l.value}`,f=`${c}${!i&&!l.originalSchema.default?"?":""}${l.originalSchema.default?`= ${L(l.originalSchema.default)}`:`: ${l.value}`}`;return{name:c,definition:u,implementation:f,default:l.originalSchema.default,required:i,imports:l.imports}});var At=({body:e,queryParams:t,params:r,headers:s})=>{let n={name:e.implementation,definition:`${e.implementation}: ${e.definition}`,implementation:`${e.implementation}: ${e.definition}`,default:!1,required:!0,type:oe.BODY},o={name:"params",definition:`params${_optionalChain([t, 'optionalAccess', _54 => _54.isOptional])?"?":""}: ${_optionalChain([t, 'optionalAccess', _55 => _55.schema, 'access', _56 => _56.name])}`,implementation:`params${_optionalChain([t, 'optionalAccess', _57 => _57.isOptional])?"?":""}: ${_optionalChain([t, 'optionalAccess', _58 => _58.schema, 'access', _59 => _59.name])}`,default:!1,required:ae(_optionalChain([t, 'optionalAccess', _60 => _60.isOptional]))?!1:!_optionalChain([t, 'optionalAccess', _61 => _61.isOptional]),type:oe.QUERY_PARAM},a={name:"headers",definition:`headers${_optionalChain([s, 'optionalAccess', _62 => _62.isOptional])?"?":""}: ${_optionalChain([s, 'optionalAccess', _63 => _63.schema, 'access', _64 => _64.name])}`,implementation:`headers${_optionalChain([s, 'optionalAccess', _65 => _65.isOptional])?"?":""}: ${_optionalChain([s, 'optionalAccess', _66 => _66.schema, 'access', _67 => _67.name])}`,default:!1,required:ae(_optionalChain([s, 'optionalAccess', _68 => _68.isOptional]))?!1:!_optionalChain([s, 'optionalAccess', _69 => _69.isOptional]),type:oe.HEADER},m=[...r.map(p=>({...p,type:oe.PARAM})),...e.definition?[n]:[],...t?[o]:[],...s?[a]:[]];return Rt(m)};var Lr=(e,t,r)=>e.map(({parameter:s,imports:n})=>{let{name:o,required:a,schema:m,content:i}=s,p=M(`${h(t)}${h(o)}`,{underscore:"_",whitespace:"_",dash:!0,es5keyword:!0,es5IdentifierName:!0}),c=m||i["application/json"].schema,l=A({schema:c,context:r,name:p}),u=je(o),f=w(s);if(n.length)return{definition:`${f}${u}${!a||c.default?"?":""}: ${n[0].name};`,imports:n,schemas:[]};if(l.isEnum&&!l.isRef){let y=p,g=ee(l.value,y,_optionalChain([l, 'access', _70 => _70.originalSchema, 'optionalAccess', _71 => _71["x-enumNames"]]));return{definition:`${f}${u}${!a||c.default?"?":""}: ${y};`,imports:[{name:y}],schemas:[...l.schemas,{name:y,model:g,imports:l.imports}]}}return{definition:`${f}${u}${!a||c.default?"?":""}: ${l.value};`,imports:l.imports,schemas:l.schemas}}),Ke= exports.getQueryParams =({queryParams:e=[],operationName:t,context:r,suffix:s="params"})=>{if(!e.length)return;let n=Lr(e,t,r),o=n.flatMap(({imports:l})=>l),a=n.flatMap(({schemas:l})=>l),m=`${h(t)}${h(s)}`,i=n.map(({definition:l})=>l).join(`
`),p=e.every(({parameter:l})=>!l.required);return{schema:{name:m,model:`export type ${m} = {
${i}
};
`,imports:o},deps:a,isOptional:p}};var Nt=({responses:e,operationName:t,context:r,contentType:s})=>{if(!e)return{imports:[],definition:{success:"",errors:""},isBlob:!1,types:{success:[],errors:[]},schemas:[],contentTypes:[]};let n=ne(Object.entries(e),t,r,"void"),o=s?n.filter(u=>{let f=!0,d=!1;return s.include&&(f=s.include.includes(u.contentType)),s.exclude&&(d=s.exclude.includes(u.contentType)),f&&!d}):n,a=o.reduce((u,f)=>(f.key.startsWith("2")?u.success.push(f):u.errors.push(f),u),{success:[],errors:[]}),m=o.flatMap(({imports:u})=>u),i=o.flatMap(({schemas:u})=>u),p=[...new Set(o.map(({contentType:u})=>u))],c=a.success.map(({value:u,formData:f})=>f?"Blob":u).join(" | "),l=a.errors.map(({value:u})=>u).join(" | ");return{imports:m,definition:{success:c||"unknown",errors:l||"unknown"},isBlob:c==="Blob",types:a,contentTypes:p,schemas:i}};var Ft=e=>/[^{]*{[\w*_-]*}.*/.test(e),Wt=e=>{let t=e.match(/([^{]*){?([\w*_-]*)}?(.*)/);if(!_optionalChain([t, 'optionalAccess', _72 => _72.length]))return e;let r=t[1],s=M(O(t[2]),{es5keyword:!0,underscore:!0,dash:!0,dot:!0}),n=Ft(t[3])?Wt(t[3]):t[3];return Ft(e)?`${r}\${${s}}${n}`:`${r}${s}${n}`},Sa= exports.getRoute =e=>e.split("/").reduce((r,s,n)=>!s&&!n?r:s.includes("{")?`${r}/${Wt(s)}`:`${r}/${s}`,"");var za=(e={},t,r)=>_lodashisempty2.default.call(void 0, e)?[]:Object.entries(e).reduce((s,[n,o])=>{let a=ne([[r,o]],n,t,"void"),m=a.flatMap(({imports:f})=>f),i=a.flatMap(({schemas:f})=>f),p=a.map(({value:f})=>f).join(" | "),c=M(`${h(n)}${r}`,{underscore:"_",whitespace:"_",dash:!0,es5keyword:!0,es5IdentifierName:!0}),u=`${w(o)}export type ${c} = ${p||"unknown"};
`;return s.push(...i),c!==p&&s.push({name:c,model:u,imports:m}),s},[]);var _lodashuniq = require('lodash.uniq'); var _lodashuniq2 = _interopRequireDefault(_lodashuniq);var _lodashuniqwith = require('lodash.uniqwith'); var _lodashuniqwith2 = _interopRequireDefault(_lodashuniqwith);var qt=({imports:e=[],target:t,isRootKey:r,specsName:s,specKey:n})=>e.length?_lodashuniqwith2.default.call(void 0, e,(o,a)=>o.name===a.name&&o.default===a.default&&o.specKey===a.specKey).sort().map(({specKey:o,name:a,values:m,alias:i})=>{if(o&&!(n===o)){let c=o!==t?s[o]:"";return!r&&o?`import ${m?"":"type "}{ ${a}${i?` as ${i}`:""} } from '../${b.join(c,O(a))}';`:`import ${m?"":"type "}{ ${a}${i?` as ${i}`:""} } from './${b.join(c,O(a))}';`}return`import ${m?"":"type "}{ ${a}${i?` as ${i}`:""} } from './${O(a)}';`}).join(`
`):"",R= exports.generateMutatorImports =({mutators:e,implementation:t,oneMore:r})=>_lodashuniqwith2.default.call(void 0, e,(n,o)=>n.name===o.name&&n.default===o.default).reduce((n,o)=>{let a=`${r?"../":""}${o.path}`;if(n+=`import ${o.default?o.name:`{ ${o.name} }`} from '${a}';`,n+=`
`,t&&(o.hasErrorType||o.bodyTypeName)){let i="";o.hasErrorType&&t.includes(o.errorTypeName)&&!n.includes(o.errorTypeName)&&(i=o.default?`ErrorType as ${o.errorTypeName}`:o.errorTypeName);let p="";o.bodyTypeName&&t.includes(o.bodyTypeName)&&!n.includes(o.bodyTypeName)&&(p=o.default?`BodyType as ${o.bodyTypeName}`:o.bodyTypeName),(p||i)&&(n+=`import type { ${i}${i&&p?", ":""}${p} } from '${a}';`,n+=`
`)}return n},""),Vt=({deps:e,isAllowSyntheticDefaultImports:t,dependency:r,specsName:s,key:n,onlyTypes:o})=>{let a=e.find(l=>l.default&&(t||!l.syntheticDefaultImport)),m=t?void 0:e.find(l=>l.syntheticDefaultImport),i=_lodashuniq2.default.call(void 0, e.filter(l=>!l.default&&!l.syntheticDefaultImport).map(({name:l,alias:u})=>u?`${l} as ${u}`:l)).join(`,
  `),p="",c=m?`import * as ${m.name} from '${r}';`:"";if(c){if(e.length===1)return c;p+=`${c}
`}return p+=`import ${o?"type ":""}${a?`${a.name}${i?",":""}`:""}${i?`{
  ${i}
}`:""} from '${r}${n!=="default"&&s[n]?`/${s[n]}`:""}'`,p},Qr= exports.addDependency =({implementation:e,exports:t,dependency:r,specsName:s,hasSchemaDir:n,isAllowSyntheticDefaultImports:o})=>{let a=t.filter(i=>e.includes(i.alias||i.name));if(!a.length)return;let m=a.reduce((i,p)=>{let c=n&&p.specKey?p.specKey:"default";return p.values&&(o||!p.syntheticDefaultImport)?(i[c]={...i[c],values:[..._nullishCoalesce(_optionalChain([i, 'access', _73 => _73[c], 'optionalAccess', _74 => _74.values]), () => ([])),p]},i):(i[c]={...i[c],types:[..._nullishCoalesce(_optionalChain([i, 'access', _75 => _75[c], 'optionalAccess', _76 => _76.types]), () => ([])),p]},i)},{});return Object.entries(m).map(([i,{values:p,types:c}])=>{let l="";return p&&(l+=Vt({deps:p,isAllowSyntheticDefaultImports:o,dependency:r,specsName:s,key:i,onlyTypes:!1})),c&&(p&&(l+=`
`),l+=Vt({deps:c,isAllowSyntheticDefaultImports:o,dependency:r,specsName:s,key:i,onlyTypes:!0})),l}).join(`
`)},Ha= exports.generateDependencyImports =(e,t,r,s,n)=>{let o=t.map(a=>Qr({...a,implementation:e,specsName:r,hasSchemaDir:s,isAllowSyntheticDefaultImports:n})).filter(Boolean).join(`
`);return o?o+`
`:""},Ja= exports.generateVerbImports =({response:e,body:t,queryParams:r,headers:s,params:n})=>[...e.imports,...t.imports,...r?[{name:r.schema.name}]:[],...s?[{name:s.schema.name}]:[],...n.flatMap(({imports:o})=>o)];var Hr=(e,t)=>e+`${t}
`,K= exports.generateModelsInline =e=>Object.values(e).flatMap(r=>r).sort((r,s)=>r.imports.some(n=>n.name===s.name)?1:-1).reduce((r,{model:s})=>Hr(r,s),"");var _acorn = require('acorn');var _fsextra = require('fs-extra'); var _fsextra2 = _interopRequireDefault(_fsextra);var Re="BodyType",zt=(e,t)=>{let r=j(e),s=j(t.path),{pathWithoutExtension:n}=j(b.relativeSafe(r.dirname,s.path));return n},Me= exports.generateMutator =async({output:e,mutator:t,name:r,workspace:s,tsconfig:n})=>{if(!t||!e)return;let o=t.default,a=t.name?t.name:`${r}Mutator`,m=t.path,i=await _fsextra2.default.readFile(m,"utf8"),p=i.includes("export type ErrorType")||i.includes("export interface ErrorType"),c=i.includes(`export type ${Re}`)||i.includes(`export interface ${Re}`),l=t.default?`${h(r)}ErrorType`:"ErrorType",u=t.default?`${h(r)}${Re}`:Re,{file:f,cached:d}=await mt(m,{isDefault:!1,root:s,alias:t.alias,tsconfig:n,load:!1});if(f){let y=o?"default":t.name,g=Xr(f,y);g||(H().error(_chalk2.default.red(`Your mutator file doesn't have the ${y} exported function`)),process.exit(1));let S=zt(e,t),v=t.name?!!t.name.startsWith("use")&&!g.numberOfParams:!g.numberOfParams;return{name:t.name||!v?a:`use${h(a)}`,path:S,default:o,hasErrorType:p,errorTypeName:l,hasSecondArg:v?g.returnNumberOfParams>1:g.numberOfParams>1,hasThirdArg:g.numberOfParams>2,isHook:v,...c?{bodyTypeName:u}:{}}}else{let y=zt(e,t);return d||H().warn(_chalk2.default.yellow("Failed to parse provided mutator function")),{name:a,path:y,default:o,hasSecondArg:!1,hasThirdArg:!1,isHook:!1,hasErrorType:p,errorTypeName:l,...c?{bodyTypeName:u}:{}}}},Xr=(e,t)=>{try{let r=_acorn.Parser.parse(e,{ecmaVersion:6}),s=_optionalChain([r, 'optionalAccess', _77 => _77.body, 'optionalAccess', _78 => _78.find, 'call', _79 => _79(o=>{if(o.type==="ExpressionStatement")return _optionalChain([o, 'access', _80 => _80.expression, 'access', _81 => _81.arguments, 'optionalAccess', _82 => _82[1], 'optionalAccess', _83 => _83.properties, 'optionalAccess', _84 => _84.some, 'call', _85 => _85(a=>_optionalChain([a, 'access', _86 => _86.key, 'optionalAccess', _87 => _87.name])===t)])||_optionalChain([o, 'access', _88 => _88.expression, 'access', _89 => _89.left, 'optionalAccess', _90 => _90.property, 'optionalAccess', _91 => _91.name])===t?!0:_optionalChain([o, 'access', _92 => _92.expression, 'access', _93 => _93.right, 'optionalAccess', _94 => _94.properties, 'optionalAccess', _95 => _95.some, 'call', _96 => _96(a=>a.key.name===t)])})]);if(!s)return;if(s.expression.type==="AssignmentExpression"){if(s.expression.right.type==="FunctionExpression"||s.expression.right.type==="ArrowFunctionExpression")return{numberOfParams:s.expression.right.params.length};if(s.expression.right.name)return ve(r,s.expression.right.name);let o=_optionalChain([s, 'access', _97 => _97.expression, 'access', _98 => _98.right, 'optionalAccess', _99 => _99.properties, 'access', _100 => _100.find, 'call', _101 => _101(a=>a.key.name===t)]);return o.value.name?ve(r,o.value.name):o.value.type==="FunctionExpression"||o.value.type==="ArrowFunctionExpression"?{numberOfParams:o.value.params.length}:void 0}let n=s.expression.arguments[1].properties.find(o=>_optionalChain([o, 'access', _102 => _102.key, 'optionalAccess', _103 => _103.name])===t);return ve(r,n.value.body.name)}catch (e3){return}},ve=(e,t)=>{let r=_optionalChain([e, 'optionalAccess', _104 => _104.body, 'optionalAccess', _105 => _105.find, 'call', _106 => _106(o=>{if(o.type==="VariableDeclaration")return o.declarations.find(a=>a.id.name===t);if(o.type==="FunctionDeclaration"&&o.id.name===t)return o})]);if(!r)return;if(r.type==="FunctionDeclaration"){let o=_optionalChain([r, 'access', _107 => _107.body, 'optionalAccess', _108 => _108.body, 'optionalAccess', _109 => _109.find, 'call', _110 => _110(a=>a.type==="ReturnStatement")]);return _optionalChain([o, 'optionalAccess', _111 => _111.argument, 'optionalAccess', _112 => _112.params])?{numberOfParams:r.params.length,returnNumberOfParams:o.argument.params.length}:{numberOfParams:r.params.length}}let s=r.declarations.find(o=>o.id.name===t);if(s.init.name)return ve(e,s.init.name);if(s.init.body.type==="ArrowFunctionExpression")return{numberOfParams:s.init.params.length,returnNumberOfParams:s.init.body.params.length};let n=_optionalChain([s, 'access', _113 => _113.init, 'access', _114 => _114.body, 'optionalAccess', _115 => _115.body, 'optionalAccess', _116 => _116.find, 'call', _117 => _117(o=>o.type==="ReturnStatement")]);return _optionalChain([n, 'optionalAccess', _118 => _118.argument, 'optionalAccess', _119 => _119.params])?{numberOfParams:s.init.params.length,returnNumberOfParams:n.argument.params.length}:{numberOfParams:s.init.params.length}};var Zr=(e,t,r)=>t&&e.formData?`
      formData,`:r&&e.formUrlEncoded?`
      formUrlEncoded,`:e.implementation?`
      ${e.implementation},`:"",en= exports.generateAxiosOptions =({response:e,isExactOptionalPropertyTypes:t,queryParams:r,headers:s,requestOptions:n,hasSignal:o})=>{let a=n!==!1;if(!r&&!s&&!e.isBlob)return a?"options":o?t?"...(signal ? { signal } : {})":"signal":"";let m="";return a||(r&&(m+=`
        params,`),s&&(m+=`
        headers,`),o&&(m+=t?`
        ...(signal ? { signal } : {}),`:`
        signal,`)),e.isBlob&&(!C(n)||!n.hasOwnProperty("responseType"))&&(m+=`
        responseType: 'blob',`),C(n)&&(m+=`
 ${_optionalChain([L, 'call', _120 => _120(n), 'optionalAccess', _121 => _121.slice, 'call', _122 => _122(1,-1)])}`),a&&(m+=`
    ...options,`,r&&(m+=`
        params: {...params, ...options?.params},`),s&&(m+=`
        headers: {...headers, ...options?.headers},`)),m},ui= exports.generateOptions =({route:e,body:t,headers:r,queryParams:s,response:n,verb:o,requestOptions:a,isFormData:m,isFormUrlEncoded:i,isAngular:p,isExactOptionalPropertyTypes:c,hasSignal:l})=>{let u=et.includes(o),f=u?Zr(t,m,i):"",d=en({response:n,queryParams:_optionalChain([s, 'optionalAccess', _123 => _123.schema]),headers:_optionalChain([r, 'optionalAccess', _124 => _124.schema]),requestOptions:a,isExactOptionalPropertyTypes:c,hasSignal:l}),y=d?`{${d}}`:"";return o===V.DELETE?f?`
      \`${e}\`,{${p?"body":"data"}:${f} ${d==="options"?`...${d}`:d}}
    `:`
      \`${e}\`,${d==="options"?d:y}
    `:`
      \`${e}\`,${u?f||"undefined,":""}${d==="options"?d:y}
    `},tn= exports.generateBodyMutatorConfig =(e,t,r)=>t&&e.formData?`,
       data: formData`:r&&e.formUrlEncoded?`,
       data: formUrlEncoded`:e.implementation?`,
      data: ${e.implementation}`:"",rn= exports.generateQueryParamsAxiosConfig =(e,t)=>{if(!t&&!e.isBlob)return"";let r="";return t&&(r+=`,
        params`),e.isBlob&&(r+=`,
        responseType: 'blob'`),r},fi= exports.generateMutatorConfig =({route:e,body:t,headers:r,queryParams:s,response:n,verb:o,isFormData:a,isFormUrlEncoded:m,isBodyVerb:i,hasSignal:p,isExactOptionalPropertyTypes:c})=>{let l=i?tn(t,a,m):"",u=rn(n,s),f=t.contentType?`,
      headers: {'Content-Type': '${t.contentType}', ${r?"...headers":""}}`:r?`,
      headers`:"";return`{url: \`${e}\`, method: '${o}'${f}${l}${u}${!i&&p?`, ${c?"...(signal ? { signal }: {})":"signal"}`:""}
    }`},di= exports.generateMutatorRequestOptions =(e,t)=>t?C(e)?`{${_optionalChain([L, 'call', _125 => _125(e), 'optionalAccess', _126 => _126.slice, 'call', _127 => _127(1,-1)])} ...options}`:"options":C(e)?`{${_optionalChain([L, 'call', _128 => _128(e), 'optionalAccess', _129 => _129.slice, 'call', _130 => _130(1,-1)])}}`:"",gi= exports.generateFormDataAndUrlEncodedFunction =({body:e,formData:t,formUrlEncoded:r,isFormData:s,isFormUrlEncoded:n})=>s&&e.formData?t?`const formData = ${t.name}(${e.implementation})`:e.formData:n&&e.formUrlEncoded?r?`const formUrlEncoded = ${r.name}(${e.implementation})`:e.formUrlEncoded:"";var Oi=(e={},t,r)=>Object.entries(e).reduce((s,[n,o])=>{let a=M(`${h(n)}${r}`,{underscore:"_",whitespace:"_",dash:!0,es5keyword:!0,es5IdentifierName:!0}),{schema:m,imports:i}=I(o,t);if(m.in!=="query")return s;if(!m.schema||i.length)return s.push({name:a,imports:i.length?[{name:i[0].name,specKey:i[0].specKey,schemaName:i[0].schemaName}]:[],model:`export type ${a} = ${i.length?i[0].name:"unknown"};
`}),s;let p=W({schema:m.schema,propName:a,context:t}),l=`${w(o)}export type ${a} = ${p.value||"unknown"};
`;return s.push(...p.schemas),a!==p.value&&s.push({name:a,model:l,imports:p.imports}),s},[]);var Lt=({name:e,schema:t,context:r,suffix:s})=>{let n=re({item:t,name:e,context:r}),o=n.value==="{}",a="";a+=w(t),o&&(r.tslint?a+=`// tslint:disable-next-line:no-empty-interface
`:a+=`// eslint-disable-next-line @typescript-eslint/no-empty-interface
`),!pe.includes(n.value)&&!_optionalChain([r, 'optionalAccess', _131 => _131.override, 'optionalAccess', _132 => _132.useTypeOverInterfaces])?a+=`export interface ${e} ${n.value}
`:a+=`export type ${e} = ${n.value};
`;let m=n.imports.filter(i=>i.name!==e);return[...n.schemas,{name:e,model:a,imports:m}]};var Ti=(e={},t,r)=>{if(_lodashisempty2.default.call(void 0, e))return[];let s=Ct(e,t);return Object.entries(s).reduce((o,[a,m])=>{let i=M(`${h(a)}${r}`,{underscore:"_",whitespace:"_",dash:!0,es5keyword:!0,es5IdentifierName:!0});if((!m.type||m.type==="object")&&!m.allOf&&!m.oneOf&&!m.anyOf&&!T(m)&&!m.nullable)return o.push(...Lt({name:i,schema:m,context:t,suffix:r})),o;{let p=A({schema:m,name:i,context:t}),c="",l=p.imports;if(c+=w(m),p.isEnum&&!p.isRef)c+=ee(p.value,i,_optionalChain([p, 'access', _133 => _133.originalSchema, 'optionalAccess', _134 => _134["x-enumNames"]]));else if(i===p.value&&p.isRef){let u=p.imports.find(f=>f.name===i);if(!u)c+=`export type ${i} = ${p.value};
`;else{let f=_optionalChain([u, 'optionalAccess', _135 => _135.specKey])?`${h(b.getSpecName(u.specKey,t.specKey))}${p.value}`:`${p.value}Bis`;c+=`export type ${i} = ${f};
`,l=l.map(d=>d.name===i?{...d,alias:f}:d)}}else c+=`export type ${i} = ${p.value};
`;return o.push(...p.schemas,{name:i,model:c,imports:l}),o}},[])};var on=async({verb:e,output:t,operation:r,route:s,verbParameters:n=[],context:o})=>{let{responses:a,requestBody:m,parameters:i,tags:p=[],deprecated:c,description:l,summary:u}=r,f=It(r,s,e),d=t.override.operations[r.operationId],y=Object.entries(t.override.tags).reduce((Xe,[Jt,Yt])=>p.includes(Jt)?ze(Xe,Yt):Xe,{}),g={...t.override,...y,...d},S=_optionalChain([d, 'optionalAccess', _136 => _136.operationName])||_optionalChain([t, 'access', _137 => _137.override, 'optionalAccess', _138 => _138.operationName]),v=S?S(r,s,e):O(f),x=M(v,{es5keyword:!0}),$=Nt({responses:a,operationName:x,context:o,contentType:g.contentType}),D=Tt({requestBody:m,operationName:x,context:o,contentType:g.contentType}),G=Dt({parameters:[...n,..._nullishCoalesce(i, () => ([]))],context:o}),E=Ke({queryParams:G.query,operationName:x,context:o}),B=t.headers?await Ke({queryParams:G.header,operationName:x,context:o,suffix:"headers"}):void 0,Q=kt({route:s,pathParams:G.path,operationId:f,context:o}),Y=At({body:D,queryParams:E,params:Q,headers:B}),Te=await Me({output:t.target,name:x,mutator:_optionalChain([g, 'optionalAccess', _139 => _139.mutator]),workspace:o.workspace,tsconfig:o.tsconfig}),Kt=k(_optionalChain([g, 'optionalAccess', _140 => _140.formData]))||C(_optionalChain([g, 'optionalAccess', _141 => _141.formData]))?await Me({output:t.target,name:x,mutator:g.formData,workspace:o.workspace,tsconfig:o.tsconfig}):void 0,Qt=k(_optionalChain([g, 'optionalAccess', _142 => _142.formUrlEncoded]))||C(_optionalChain([g, 'optionalAccess', _143 => _143.formUrlEncoded]))?await Me({output:t.target,name:x,mutator:g.formUrlEncoded,workspace:o.workspace,tsconfig:o.tsconfig}):void 0,Ht=w({description:l,deprecated:c,summary:u}),Je={verb:e,tags:p,summary:r.summary,operationId:f,operationName:x,response:$,body:D,headers:B,queryParams:E,params:Q,props:Y,mutator:Te,formData:Kt,formUrlEncoded:Qt,override:g,doc:Ht,deprecated:c},Ye=await jt(_optionalChain([g, 'optionalAccess', _144 => _144.transformer]),o.workspace);return Ye?Ye(Je):Je},ki= exports.generateVerbsOptions =({verbs:e,output:t,route:r,context:s})=>xt(Object.entries(e),async(n,[o,a])=>{if(Ot(o)){let m=await on({verb:o,output:t,verbParameters:e.parameters,route:r,operation:a,context:s});n.push(m)}return n},[]);var sn=({schema:{imports:e,model:t},target:r,isRootKey:s,specsName:n,header:o,specKey:a})=>{let m=o;return m+=qt({imports:e.filter(i=>!t.includes(`type ${i.alias||i.name} =`)&&!t.includes(`interface ${i.alias||i.name} {`)),target:r,isRootKey:s,specsName:n,specKey:a}),m+=e.length?`

`:`
`,m+=t,m},an=(e,t)=>b.join(e,`/${t}.ts`),pn= exports.writeModelInline =(e,t)=>e+`${t}
`,Hi= exports.writeModelsInline =e=>e.reduce((t,{model:r})=>pn(t,r),""),mn= exports.writeSchema =async({path:e,schema:t,target:r,specKey:s,isRootKey:n,specsName:o,header:a})=>{let m=O(t.name);try{await _fsextra2.default.outputFile(an(e,m),sn({schema:t,target:r,isRootKey:n,specsName:o,header:a,specKey:s}))}catch(i){throw`Oups... \u{1F37B}. An Error occurred while writing schema ${m} => ${i}`}},Ji= exports.writeSchemas =async({schemaPath:e,schemas:t,target:r,specKey:s,isRootKey:n,specsName:o,header:a})=>{let m=b.join(e,"/index.ts");await _fsextra2.default.ensureFile(m),await Promise.all(t.map(i=>mn({path:e,schema:i,target:r,specKey:s,isRootKey:n,specsName:o,header:a})));try{let p=(await _fsextra2.default.readFile(m)).toString(),c=t.filter(f=>!p.includes(`export * from './${O(f.name)}'`)&&!p.includes(`export * from "./${O(f.name)}"`)).map(f=>`export * from './${O(f.name)}';`),u=[..._nullishCoalesce(_optionalChain([p, 'access', _145 => _145.match, 'call', _146 => _146(/export \* from(.*)('|")/g), 'optionalAccess', _147 => _147.map, 'call', _148 => _148(f=>f+";")]), () => ([])),...c].sort().join(`
`);await _fsextra2.default.writeFile(m,u)}catch(i){throw`Oups... \u{1F37B}. An Error occurred while writing schema index file ${m} => ${i}`}};var we=(e,t)=>{let r=Object.values(e.operations).map(({operationName:a})=>a),s=_optionalChain([t, 'optionalAccess', _149 => _149.client])===q.ANGULAR,n=e.title({outputClient:t.client,title:h(e.info.title),customTitleFunc:t.override.title}),o=Object.values(e.operations).reduce((a,m,i,p)=>{if(a.imports.push(...m.imports),a.importsMSW.push(...m.importsMSW),a.implementation+=m.implementation+`
`,a.implementationMSW.function+=m.implementationMSW.function,a.implementationMSW.handler+=m.implementationMSW.handler,m.mutator&&a.mutators.push(m.mutator),m.formData&&a.formData.push(m.formData),m.formUrlEncoded&&a.formUrlEncoded.push(m.formUrlEncoded),m.clientMutators&&a.clientMutators.push(...m.clientMutators),i===p.length-1){let c=a.mutators.some(y=>s?y.hasThirdArg:y.hasSecondArg),l=_nullishCoalesce(_nullishCoalesce(_optionalChain([t, 'access', _150 => _150.packageJson, 'optionalAccess', _151 => _151.dependencies, 'optionalAccess', _152 => _152.typescript]), () => (_optionalChain([t, 'access', _153 => _153.packageJson, 'optionalAccess', _154 => _154.devDependencies, 'optionalAccess', _155 => _155.typescript]))), () => ("4.4.0")),u=be(l,"4.5.0"),f=e.header({outputClient:t.client,isRequestOptions:t.override.requestOptions!==!1,isMutator:c,isGlobalMutator:!!t.override.mutator,provideIn:t.override.angular.provideIn,hasAwaitedType:u,titles:n});a.implementation=f.implementation+a.implementation,a.implementationMSW.handler=f.implementationMSW+a.implementationMSW.handler;let d=e.footer({outputClient:_optionalChain([t, 'optionalAccess', _156 => _156.client]),operationNames:r,hasMutator:!!a.mutators.length,hasAwaitedType:u,titles:n});a.implementation+=d.implementation,a.implementationMSW.handler+=d.implementationMSW}return a},{imports:[],implementation:"",implementationMSW:{function:"",handler:""},importsMSW:[],mutators:[],clientMutators:[],formData:[],formUrlEncoded:[]});return{...o,implementationMSW:o.implementationMSW.function+o.implementationMSW.handler}};var mp=async({builder:e,output:t,specsName:r,header:s})=>{try{let{path:n,dirname:o}=j(t.target,{backupFilename:O(e.info.title)}),{imports:a,importsMSW:m,implementation:i,implementationMSW:p,mutators:c,clientMutators:l,formData:u,formUrlEncoded:f}=we(e,t),d=s,y=t.schemas?b.relativeSafe(o,j(t.schemas).dirname):void 0,g=_(t.tsconfig);return d+=e.imports({client:t.client,implementation:i,imports:y?[{exports:a.filter(S=>!m.some(v=>S.name===v.name)),dependency:y}]:[],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:g,hasGlobalMutator:!!t.override.mutator,packageJson:t.packageJson}),t.mock&&(d+=e.importsMock({implementation:p,imports:y?[{exports:m,dependency:y}]:[],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:g})),c&&(d+=R({mutators:c,implementation:i})),l&&(d+=R({mutators:l})),u&&(d+=R({mutators:u})),f&&(d+=R({mutators:f})),t.schemas||(d+=K(e.schemas)),d+=`

${i}`,t.mock&&(d+=`

`,d+=p),await _fsextra2.default.outputFile(n,d),[n]}catch(n){throw`Oups... \u{1F37B}. An Error occurred while writing file => ${n}`}};var hp=async({builder:e,output:t,specsName:r,header:s})=>{try{let{filename:n,dirname:o,extension:a}=j(t.target,{backupFilename:O(e.info.title)}),{imports:m,implementation:i,implementationMSW:p,importsMSW:c,mutators:l,clientMutators:u,formData:f,formUrlEncoded:d}=we(e,t),y=s,g=s,S=t.schemas?b.relativeSafe(o,j(t.schemas).dirname):"./"+n+".schemas",v=_(t.tsconfig);y+=e.imports({client:t.client,implementation:i,imports:[{exports:m,dependency:S}],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:v,hasGlobalMutator:!!t.override.mutator,packageJson:t.packageJson}),g+=e.importsMock({implementation:p,imports:[{exports:c,dependency:S}],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:v});let x=t.schemas?void 0:b.join(o,n+".schemas"+a);if(x){let E=s+K(e.schemas);await _fsextra2.default.outputFile(b.join(o,n+".schemas"+a),E)}l&&(y+=R({mutators:l,implementation:i})),u&&(y+=R({mutators:u})),f&&(y+=R({mutators:f})),d&&(y+=R({mutators:d})),y+=`
${i}`,g+=`
${p}`;let $=n+(q.ANGULAR===t.client?".service":"")+a,D=b.join(o,$);await _fsextra2.default.outputFile(b.join(o,$),y);let G=t.mock?b.join(o,n+".msw"+a):void 0;return G&&await _fsextra2.default.outputFile(G,g),[D,...x?[x]:[],...G?[G]:[]]}catch(n){throw`Oups... \u{1F37B}. An Error occurred while splitting => ${n}`}};var ln=e=>({...e,tags:e.tags.length?e.tags:["default"]}),un=(e,t)=>t.tags.map(he).reduce((r,s)=>{let n=r[s];return n?(r[s]={implementation:n.implementation+t.implementation,imports:[...n.imports,...t.imports],importsMSW:[...n.importsMSW,...t.importsMSW],implementationMSW:{function:n.implementationMSW.function+t.implementationMSW.function,handler:n.implementationMSW.handler+t.implementationMSW.handler},mutators:t.mutator?[..._nullishCoalesce(n.mutators, () => ([])),t.mutator]:n.mutators,clientMutators:t.clientMutators?[..._nullishCoalesce(n.clientMutators, () => ([])),...t.clientMutators]:n.clientMutators,formData:t.formData?[..._nullishCoalesce(n.formData, () => ([])),t.formData]:n.formData,formUrlEncoded:t.formUrlEncoded?[..._nullishCoalesce(n.formUrlEncoded, () => ([])),t.formUrlEncoded]:n.formUrlEncoded},r):(r[s]={imports:t.imports,importsMSW:t.importsMSW,mutators:t.mutator?[t.mutator]:[],clientMutators:_nullishCoalesce(t.clientMutators, () => ([])),formData:t.formData?[t.formData]:[],formUrlEncoded:t.formUrlEncoded?[t.formUrlEncoded]:[],implementation:t.implementation,implementationMSW:{function:t.implementationMSW.function,handler:t.implementationMSW.handler}},r)},e),Pe= exports.generateTargetForTags =(e,t)=>{let r=t.client===q.ANGULAR,s=Object.values(e.operations).map(ln).reduce((n,o,a,m)=>{let i=un(n,o);return a===m.length-1?Object.entries(i).reduce((p,[c,l])=>{let u=!!_optionalChain([l, 'access', _157 => _157.mutators, 'optionalAccess', _158 => _158.some, 'call', _159 => _159(x=>r?x.hasThirdArg:x.hasSecondArg)]),f=Object.values(e.operations).filter(({tags:x})=>x.includes(c)).map(({operationName:x})=>x),d=_nullishCoalesce(_nullishCoalesce(_optionalChain([t, 'access', _160 => _160.packageJson, 'optionalAccess', _161 => _161.dependencies, 'optionalAccess', _162 => _162.typescript]), () => (_optionalChain([t, 'access', _163 => _163.packageJson, 'optionalAccess', _164 => _164.devDependencies, 'optionalAccess', _165 => _165.typescript]))), () => ("4.4.0")),y=be(d,"4.5.0"),g=e.title({outputClient:t.client,title:h(c),customTitleFunc:t.override.title}),S=e.footer({outputClient:_optionalChain([t, 'optionalAccess', _166 => _166.client]),operationNames:f,hasMutator:!!_optionalChain([l, 'access', _167 => _167.mutators, 'optionalAccess', _168 => _168.length]),hasAwaitedType:y,titles:g}),v=e.header({outputClient:t.client,isRequestOptions:t.override.requestOptions!==!1,isMutator:u,isGlobalMutator:!!t.override.mutator,provideIn:t.override.angular.provideIn,hasAwaitedType:y,titles:g});return p[c]={implementation:v.implementation+l.implementation+S.implementation,implementationMSW:{function:l.implementationMSW.function,handler:v.implementationMSW+l.implementationMSW.handler+S.implementationMSW},imports:l.imports,importsMSW:l.importsMSW,mutators:l.mutators,clientMutators:l.clientMutators,formData:l.formData,formUrlEncoded:l.formUrlEncoded},p},{}):i},{});return Object.entries(s).reduce((n,[o,a])=>(n[o]={...a,implementationMSW:a.implementationMSW.function+a.implementationMSW.handler},n),{})};var Ip=async({builder:e,output:t,specsName:r,header:s})=>{let{filename:n,dirname:o,extension:a}=j(t.target,{backupFilename:O(e.info.title)}),m=Pe(e,t),i=_(t.tsconfig);return(await Promise.all(Object.entries(m).map(async([c,l])=>{try{let{imports:u,implementation:f,implementationMSW:d,importsMSW:y,mutators:g,clientMutators:S,formData:v,formUrlEncoded:x}=l,$=s,D=s,G=t.schemas?"../"+b.relativeSafe(o,j(t.schemas).dirname):"../"+n+".schemas";$+=e.imports({client:t.client,implementation:f,imports:[{exports:u,dependency:G}],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:i,hasGlobalMutator:!!t.override.mutator,packageJson:t.packageJson}),D+=e.importsMock({implementation:d,imports:[{exports:y,dependency:G}],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:i});let E=t.schemas?void 0:b.join(o,n+".schemas"+a);if(E){let Te=s+K(e.schemas);await _fsextra2.default.outputFile(E,Te)}g&&($+=R({mutators:g,implementation:f,oneMore:!0})),S&&($+=R({mutators:S,oneMore:!0})),v&&($+=R({mutators:v,oneMore:!0})),x&&($+=R({mutators:x,oneMore:!0})),$+=`
${f}`,D+=`
${d}`;let B=c+(q.ANGULAR===t.client?".service":"")+a,Q=b.join(o,c,B);await _fsextra2.default.outputFile(Q,$);let Y=t.mock?b.join(o,c,c+".msw"+a):void 0;return Y&&await _fsextra2.default.outputFile(Y,D),[Q,...E?[E]:[],...Y?[Y]:[]]}catch(u){throw`Oups... \u{1F37B}. An Error occurred while splitting tag ${c} => ${u}`}}))).flatMap(c=>c)};var Wp=async({builder:e,output:t,specsName:r,header:s})=>{let{filename:n,dirname:o,extension:a}=j(t.target,{backupFilename:O(e.info.title)}),m=Pe(e,t),i=_(t.tsconfig);return(await Promise.all(Object.entries(m).map(async([c,l])=>{try{let{imports:u,implementation:f,implementationMSW:d,importsMSW:y,mutators:g,clientMutators:S,formData:v,formUrlEncoded:x}=l,$=s,D=t.schemas?b.relativeSafe(o,j(t.schemas).dirname):"./"+n+".schemas";$+=e.imports({client:t.client,implementation:f,imports:[{exports:u.filter(B=>!y.some(Q=>B.name===Q.name)),dependency:D}],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:i,hasGlobalMutator:!!t.override.mutator,packageJson:t.packageJson}),t.mock&&($+=e.importsMock({implementation:d,imports:[{exports:y,dependency:D}],specsName:r,hasSchemaDir:!!t.schemas,isAllowSyntheticDefaultImports:i}));let G=t.schemas?void 0:b.join(o,n+".schemas"+a);if(G){let B=s+K(e.schemas);await _fsextra2.default.outputFile(G,B)}g&&($+=R({mutators:g,implementation:f})),S&&($+=R({mutators:S})),v&&($+=R({mutators:v})),x&&($+=R({mutators:x})),$+=`

`,$+=f,t.mock&&($+=`

`,$+=d);let E=b.join(o,`${he(c)}${a}`);return await _fsextra2.default.outputFile(E,$),[E,...G?[G]:[]]}catch(u){throw`Oups... \u{1F37B}. An Error occurred while writing tag ${c} => ${u}`}}))).flatMap(c=>c)};exports.BODY_TYPE_NAME = Re; exports.GetterPropType = oe; exports.LogLevels = Ee; exports.OutputClient = q; exports.OutputMode = dn; exports.RefComponentSuffix = Zo; exports.SchemaType = Ze; exports.URL_REGEX = hn; exports.VERBS_WITH_BODY = et; exports.Verbs = V; exports.addDependency = Qr; exports.asyncReduce = xt; exports.camel = O; exports.combineSchemas = _e; exports.compareVersions = be; exports.count = lo; exports.createDebugger = rt; exports.createLogger = H; exports.createSuccessMessage = Gn; exports.dynamicImport = jt; exports.errorMessage = vn; exports.escape = Le; exports.generalJSTypes = er; exports.generalJSTypesWithArray = pe; exports.generateAxiosOptions = en; exports.generateBodyMutatorConfig = tn; exports.generateBodyOptions = Zr; exports.generateComponentDefinition = za; exports.generateDependencyImports = Ha; exports.generateFormDataAndUrlEncodedFunction = gi; exports.generateImports = qt; exports.generateModelInline = Hr; exports.generateModelsInline = K; exports.generateMutator = Me; exports.generateMutatorConfig = fi; exports.generateMutatorImports = R; exports.generateMutatorRequestOptions = di; exports.generateOptions = ui; exports.generateParameterDefinition = Oi; exports.generateQueryParamsAxiosConfig = rn; exports.generateSchemasDefinition = Ti; exports.generateTarget = we; exports.generateTargetForTags = Pe; exports.generateVerbImports = Ja; exports.generateVerbsOptions = ki; exports.getArray = Gt; exports.getBody = Tt; exports.getEnum = ee; exports.getEnumImplementation = Se; exports.getExtension = me; exports.getFileInfo = j; exports.getKey = je; exports.getNumberWord = xe; exports.getObject = Et; exports.getOperationId = It; exports.getParameters = Dt; exports.getParams = kt; exports.getParamsInPath = zr; exports.getProps = At; exports.getQueryParams = Ke; exports.getRefInfo = te; exports.getResReqTypes = ne; exports.getResponse = Nt; exports.getRoute = Sa; exports.getScalar = re; exports.ibmOpenapiValidator = wo; exports.ibmOpenapiValidatorErrors = it; exports.ibmOpenapiValidatorWarnings = at; exports.isBoolean = se; exports.isDirectory = ct; exports.isFunction = ht; exports.isModule = dt; exports.isNull = bt; exports.isNumber = gt; exports.isNumeric = yt; exports.isObject = C; exports.isReference = T; exports.isRootKey = Yn; exports.isSchema = Jn; exports.isString = k; exports.isSyntheticDefaultImportsAllow = _; exports.isUndefined = ae; exports.isUrl = fe; exports.isVerb = Ot; exports.jsDoc = w; exports.kebab = he; exports.loadFile = mt; exports.log = F; exports.mergeDeep = ze; exports.mismatchArgsMessage = Mn; exports.openApiConverter = ho; exports.pascal = h; exports.removeFiles = Bn; exports.resolveDiscriminators = Ct; exports.resolveObject = W; exports.resolveRef = I; exports.resolveValue = A; exports.sanitize = M; exports.snake = eo; exports.sortByPriority = Rt; exports.startMessage = Rn; exports.stringify = L; exports.toObjectString = jo; exports.upath = b; exports.upper = to; exports.writeModelInline = pn; exports.writeModelsInline = Hi; exports.writeSchema = mn; exports.writeSchemas = Ji; exports.writeSingleMode = mp; exports.writeSplitMode = hp; exports.writeSplitTagsMode = Ip; exports.writeTagsMode = Wp;
