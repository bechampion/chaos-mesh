"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }var Gr=Object.create;var Ct=Object.defineProperty;var Mr=Object.getOwnPropertyDescriptor;var Nr=Object.getOwnPropertyNames;var Fr=Object.getPrototypeOf,$r=Object.prototype.hasOwnProperty;var $=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var y=(e,t)=>()=>(e&&(t=e(e=0)),t);var kt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var zr=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Nr(t))!$r.call(e,i)&&i!==r&&Ct(e,i,{get:()=>t[i],enumerable:!(n=Mr(t,i))||n.enumerable});return e};var x=(e,t,r)=>(r=e!=null?Gr(Fr(e)):{},zr(t||!e||!e.__esModule?Ct(r,"default",{value:e,enumerable:!0}):r,e));var It=kt((_i,Er)=>{Er.exports={name:"orval",description:"A swagger client generator for typescript",version:"6.12.1",license:"MIT",files:["dist"],bin:{orval:"dist/bin/orval.js"},type:"commonjs",main:"dist/index.js",keywords:["rest","client","swagger","open-api","fetch","data fetching","code-generation","angular","react","react-query","svelte","svelte-query","vue","vue-query","msw","mock","axios","vue-query","vue","swr"],author:{name:"Victor Bury",email:"victor@anymaniax.com"},repository:{type:"git",url:"https://github.com/anymaniax/orval"},scripts:{build:"tsup ./src/bin/orval.ts ./src/index.ts --target node12 --minify --clean --dts --splitting",dev:"tsup ./src/bin/orval.ts ./src/index.ts --target node12 --clean --watch src --onSuccess 'yarn generate-api'",lint:"eslint src/**/*.ts","generate-api":"node ./dist/bin/orval.js --config ../../samples/react-query/basic/orval.config.ts --watch"},devDependencies:{"@types/chalk":"^2.2.0","@types/inquirer":"^8.2.2","@types/lodash.uniq":"^4.5.7"},dependencies:{"@apidevtools/swagger-parser":"^10.1.0","@orval/angular":"6.12.1","@orval/axios":"6.12.1","@orval/core":"6.12.1","@orval/msw":"6.12.1","@orval/query":"6.12.1","@orval/swr":"6.12.1",ajv:"^8.11.0",cac:"^6.7.12",chalk:"^4.1.2",chokidar:"^3.5.3",enquirer:"^2.3.6",execa:"^5.1.1","find-up":"5.0.0","fs-extra":"^10.1.0","lodash.uniq":"^4.5.0","openapi3-ts":"^3.0.0","string-argv":"^0.3.1",tsconfck:"^2.0.1"}}});var _https = require('https'); var _https2 = _interopRequireDefault(_https);var Pt,U=y(()=>{"use strict";Pt=(e,t)=>new Promise((r,n)=>{let i=_https2.default.request(e,o=>{let s="";o.on("data",a=>s+=a.toString()),o.on("error",n),o.on("end",()=>{let a={status:o.statusCode,headers:o.headers,body:JSON.parse(s)};o.statusCode&&o.statusCode>=200&&o.statusCode<=299?r(a):n(a)})});i.on("error",n),t&&i.write(t,"binary"),i.end()})});var _core = require('@orval/core');var _enquirer = require('enquirer');var _fsextra = require('fs-extra'); var _fsextra2 = _interopRequireDefault(_fsextra);var Hr,J,Wr,Br,jt,K=y(()=>{"use strict";U();Hr=({accessToken:e,repo:t,owner:r,branch:n,path:i})=>{let o=JSON.stringify({query:`query {
      repository(name: "${t}", owner: "${r}") {
        object(expression: "${n}:${i}") {
          ... on Blob {
            text
          }
        }
      }
    }`});return[{method:"POST",hostname:"api.github.com",path:"/graphql",headers:{"content-type":"application/json","user-agent":"orval-importer",authorization:`bearer ${e}`,"Content-Length":o.length}},o]},J=null,Wr=async e=>{if(J)return J;if(await _fsextra2.default.pathExists(e))return _fsextra2.default.readFile(e,"utf-8");{let t=await _enquirer.prompt.call(void 0, [{type:"input",name:"githubToken",message:"Please provide a GitHub token with `repo` rules checked (https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/)"},{type:"confirm",name:"saveToken",message:"Would you like to store your token for the next time? (stored in your node_modules)"}]);return J=t.githubToken,t.saveToken&&await _fsextra2.default.outputFile(e,t.githubToken),t.githubToken}},Br=async e=>{var p,d,g,m;let t=_core.upath.join(__dirname,".githubToken"),r=await Wr(t),[n]=e.split("github.com/").slice(-1),[i,o,,s,...a]=n.split("/"),c=a.join("/");try{let{body:l}=await Pt(...Hr({accessToken:r,repo:o,owner:i,branch:s,path:c}));return(p=l.errors)!=null&&p.length&&((d=l.errors)==null?void 0:d.some(u=>(u==null?void 0:u.type)==="NOT_FOUND"))&&(await _enquirer.prompt.call(void 0, [{type:"confirm",name:"removeToken",message:"Your token doesn't have the correct permissions, should we remove it?"}])).removeToken&&await _fsextra2.default.unlink(t),(m=(g=l.data)==null?void 0:g.repository)==null?void 0:m.object.text}catch(l){throw l.body?(l.body.message==="Bad credentials"&&(await _enquirer.prompt.call(void 0, [{type:"confirm",name:"removeToken",message:"Your token doesn't have the correct permissions, should we remove it?"}])).removeToken&&await _fsextra2.default.unlink(t),l.body.message||`Oups... \u{1F37B}. ${l}`):`Oups... \u{1F37B}. ${l}`}},jt={order:199,canRead(e){return e.url.includes("github.com")},read(e){return Br(e.url)}}});var _findup = require('find-up'); var _findup2 = _interopRequireDefault(_findup);var At,V=y(()=>{"use strict";A();At=async(e,t=process.cwd())=>{if(!e){let n=await _findup2.default.call(void 0, ["package.json"],{cwd:t});return n?await Promise.resolve().then(()=>x($(n))):void 0}let r=w(e,t);if(_fsextra2.default.existsSync(r))return await Promise.resolve().then(()=>x($(r)))}});var _tsconfck = require('tsconfck');var Gt,q=y(()=>{"use strict";A();Gt=async(e,t=process.cwd())=>{var r,n;if(_core.isUndefined.call(void 0, e)){let i=await _findup2.default.call(void 0, ["tsconfig.json","jsconfig.json"],{cwd:t});return i?(await _tsconfck.parse.call(void 0, i)).tsconfig:void 0}if(_core.isString.call(void 0, e)){let i=w(e,t);if(_fsextra2.default.existsSync(i)){let o=await _tsconfck.parse.call(void 0, i);return((n=(r=o.referenced)==null?void 0:r.find(({tsconfigFile:a})=>a===i))==null?void 0:n.tsconfig)||o.tsconfig}return}if(_core.isObject.call(void 0, e))return e}});var _chalk = require('chalk'); var _chalk2 = _interopRequireDefault(_chalk);function ls(e){return e}var te,Ft,tn,b,Mt,w,Nt,rn,nn,$t,on,A= exports.f =y(()=>{"use strict";te=x(It());K();V();q();Ft= exports.e =async(e,t=process.cwd(),r={})=>{var h,F,v,Oe,ve,xe,Se,_e,Ce,ke,Ie,Pe,je,Ae,Te,Ge,Me,Ne,Fe,$e,ze,Ee,Re,De,He,We,Be,Le,Ue,Je,Qe,Ke,Ve,qe,Ye,Xe,Ze,et,tt,rt,nt,ot,it,st,at,ct,lt,pt,mt,ut,ft,dt,gt,ht,yt,wt,bt,Ot,vt,xt,St,_t;let n=await(_core.isFunction.call(void 0, e)?e():e);n.input||(_core.createLogger.call(void 0, ).error(_chalk2.default.red("Config require an input")),process.exit(1)),n.output||(_core.createLogger.call(void 0, ).error(_chalk2.default.red("Config require an output")),process.exit(1));let i=_core.isString.call(void 0, n.input)?{target:n.input}:n.input,o=_core.isString.call(void 0, n.output)?{target:n.output}:n.output,s=w(o.workspace||"",t),{clean:a,prettier:c,client:p,mode:d,mock:g,tslint:m}=r,l=await Gt(o.tsconfig||r.tsconfig,t),f=await At(o.packageJson||r.packageJson,t),u={input:{target:r.input?Mt(r.input,process.cwd()):Mt(i.target,t),validation:i.validation||!1,override:{transformer:w((h=i.override)==null?void 0:h.transformer,t)},converterOptions:(F=i.converterOptions)!=null?F:{},parserOptions:_core.mergeDeep.call(void 0, tn,(v=i.parserOptions)!=null?v:{})},output:{target:r.output?w(r.output,process.cwd()):w(o.target,s),schemas:w(o.schemas,s),workspace:o.workspace?s:void 0,client:(ve=(Oe=o.client)!=null?Oe:p)!=null?ve:_core.OutputClient.AXIOS_FUNCTIONS,mode:rn((xe=o.mode)!=null?xe:d),mock:(_e=(Se=o.mock)!=null?Se:g)!=null?_e:!1,clean:(ke=(Ce=o.clean)!=null?Ce:a)!=null?ke:!1,prettier:(Pe=(Ie=o.prettier)!=null?Ie:c)!=null?Pe:!1,tslint:(Ae=(je=o.tslint)!=null?je:m)!=null?Ae:!1,tsconfig:l,packageJson:f,headers:(Te=o.headers)!=null?Te:!1,override:{...o.override,mock:{arrayMin:(Ne=(Me=(Ge=o.override)==null?void 0:Ge.mock)==null?void 0:Me.arrayMin)!=null?Ne:1,arrayMax:(ze=($e=(Fe=o.override)==null?void 0:Fe.mock)==null?void 0:$e.arrayMax)!=null?ze:10,...(Re=(Ee=o.override)==null?void 0:Ee.mock)!=null?Re:{}},operations:Nt((He=(De=o.override)==null?void 0:De.operations)!=null?He:{},s),tags:Nt((Be=(We=o.override)==null?void 0:We.tags)!=null?Be:{},s),mutator:b(s,(Le=o.override)==null?void 0:Le.mutator),formData:(Ke=_core.isBoolean.call(void 0, (Ue=o.override)==null?void 0:Ue.formData)?(Qe=o.override)==null?void 0:Qe.formData:b(s,(Je=o.override)==null?void 0:Je.formData))!=null?Ke:!0,formUrlEncoded:(Xe=_core.isBoolean.call(void 0, (Ve=o.override)==null?void 0:Ve.formUrlEncoded)?(Ye=o.override)==null?void 0:Ye.formUrlEncoded:b(s,(qe=o.override)==null?void 0:qe.formUrlEncoded))!=null?Xe:!0,header:((Ze=o.override)==null?void 0:Ze.header)===!1?!1:_core.isFunction.call(void 0, (et=o.override)==null?void 0:et.header)?(tt=o.override)==null?void 0:tt.header:on,requestOptions:(nt=(rt=o.override)==null?void 0:rt.requestOptions)!=null?nt:!0,components:{schemas:{suffix:_core.RefComponentSuffix.schemas,...(st=(it=(ot=o.override)==null?void 0:ot.components)==null?void 0:it.schemas)!=null?st:{}},responses:{suffix:_core.RefComponentSuffix.responses,...(lt=(ct=(at=o.override)==null?void 0:at.components)==null?void 0:ct.responses)!=null?lt:{}},parameters:{suffix:_core.RefComponentSuffix.parameters,...(ut=(mt=(pt=o.override)==null?void 0:pt.components)==null?void 0:mt.parameters)!=null?ut:{}},requestBodies:{suffix:_core.RefComponentSuffix.requestBodies,...(gt=(dt=(ft=o.override)==null?void 0:ft.components)==null?void 0:dt.requestBodies)!=null?gt:{}}},query:{useQuery:!0,signal:!0,...$t((ht=o.override)==null?void 0:ht.query,t)},swr:{...(wt=(yt=o.override)==null?void 0:yt.swr)!=null?wt:{}},angular:{provideIn:(vt=(Ot=(bt=o.override)==null?void 0:bt.angular)==null?void 0:Ot.provideIn)!=null?vt:"root"},useDates:((xt=o.override)==null?void 0:xt.useDates)||!1,useDeprecatedOperations:(_t=(St=o.override)==null?void 0:St.useDeprecatedOperations)!=null?_t:!0}},hooks:n.hooks?nn(n.hooks):{}};return u.input.target||(_core.createLogger.call(void 0, ).error(_chalk2.default.red("Config require an input target")),process.exit(1)),!u.output.target&&!u.output.schemas&&(_core.createLogger.call(void 0, ).error(_chalk2.default.red("Config require an output target or schemas")),process.exit(1)),u},tn={validate:!0,resolve:{github:jt}},b=(e,t)=>{var r;return _core.isObject.call(void 0, t)?(t.path||(_core.createLogger.call(void 0, ).error(_chalk2.default.red("Mutator need a path")),process.exit(1)),{...t,path:_core.upath.resolve(e,t.path),default:(r=t.default||!t.name)!=null?r:!1}):_core.isString.call(void 0, t)?{path:_core.upath.resolve(e,t),default:!0}:t},Mt=(e,t)=>_core.isString.call(void 0, e)&&!_core.isUrl.call(void 0, e)?w(e,t):e,w=(e,t)=>_core.isString.call(void 0, e)?_core.upath.resolve(t,e):e,Nt=(e,t)=>Object.fromEntries(Object.entries(e).map(([r,{transformer:n,mutator:i,formData:o,formUrlEncoded:s,query:a,...c}])=>[r,{...c,...a?{query:$t(a,t)}:{},...n?{transformer:w(n,t)}:{},...i?{mutator:b(t,i)}:{},...o?{formData:_core.isBoolean.call(void 0, o)?o:b(t,o)}:{},...s?{formUrlEncoded:_core.isBoolean.call(void 0, s)?s:b(t,s)}:{}}])),rn=e=>e?Object.values(_core.OutputMode).includes(e)?e:(_core.createLogger.call(void 0, ).warn(_chalk2.default.yellow(`Unknown the provided mode => ${e}`)),_core.OutputMode.SINGLE):_core.OutputMode.SINGLE,nn=e=>Object.keys(e).reduce((r,n)=>_core.isString.call(void 0, e[n])?{...r,[n]:[e[n]]}:Array.isArray(e[n])?{...r,[n]:e[n]}:_core.isFunction.call(void 0, e[n])?{...r,[n]:[e[n]]}:r,{}),$t=(e={},t)=>(e.options&&console.warn("[WARN] Using query options is deprecated and will be removed in a future major release. Please use queryOptions or mutationOptions instead."),{..._core.isUndefined.call(void 0, e.useQuery)?{}:{useQuery:e.useQuery},..._core.isUndefined.call(void 0, e.useInfinite)?{}:{useInfinite:e.useInfinite},...e.useInfiniteQueryParam?{useInfiniteQueryParam:e.useInfiniteQueryParam}:{},...e.options?{options:e.options}:{},...e!=null&&e.queryKey?{queryKey:b(t,e==null?void 0:e.queryKey)}:{},...e!=null&&e.queryOptions?{queryOptions:b(t,e==null?void 0:e.queryOptions)}:{},...e!=null&&e.mutationOptions?{mutationOptions:b(t,e==null?void 0:e.mutationOptions)}:{},..._core.isUndefined.call(void 0, e.signal)?{}:{signal:e.signal}}),on=({title:e,description:t,version:r})=>[`Generated by ${te.default.name} v${te.default.version} \u{1F37A}`,"Do not edit manually.",...e?[e]:[],...t?[t]:[],...r?[`OpenAPI spec version: ${r}`]:[]]});var zt,ne= exports.h =y(()=>{"use strict";zt= exports.g =async(e,t,r=".")=>{if(!e)return;let{watch:n}=await Promise.resolve().then(()=>x($("chokidar"))),i=["**/{.git,node_modules}/**"],o=typeof e=="boolean"?r:Array.isArray(e)?e.filter(a=>typeof a=="string"):e;_core.log.call(void 0, `Watching for changes in ${Array.isArray(o)?o.map(a=>'"'+a+'"').join(" | "):'"'+o+'"'}`),n(o,{ignorePermissionErrors:!0,ignored:i}).on("all",async(a,c)=>{_core.log.call(void 0, `Change detected: ${a} ${c}`);try{await t()}catch(p){_core.log.call(void 0, _chalk2.default.red(p))}})}});var er=kt((ds,Zt)=>{var an=200,se="__lodash_hash_undefined__",cn=1/0,Wt=9007199254740991,ln="[object Arguments]",pn="[object Function]",mn="[object GeneratorFunction]",un="[object Symbol]",fn=/[\\^$.*+?()[\]{}|]/g,dn=/^\[object .+?Constructor\]$/,gn=/^(?:0|[1-9]\d*)$/,hn=typeof global=="object"&&global&&global.Object===Object&&global,yn=typeof self=="object"&&self&&self.Object===Object&&self,ae=hn||yn||Function("return this")();function wn(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function bn(e,t){var r=e?e.length:0;return!!r&&xn(e,t,0)>-1}function On(e,t,r){for(var n=-1,i=e?e.length:0;++n<i;)if(r(t,e[n]))return!0;return!1}function Bt(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function ce(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function vn(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function xn(e,t,r){if(t!==t)return vn(e,Sn,r);for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}function Sn(e){return e!==e}function _n(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Cn(e){return function(t){return e(t)}}function kn(e,t){return e.has(t)}function In(e,t){return e==null?void 0:e[t]}function Pn(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch (e2){}return t}function Lt(e,t){return function(r){return e(t(r))}}var jn=Array.prototype,An=Function.prototype,D=Object.prototype,oe=ae["__core-js_shared__"],Et=function(){var e=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ut=An.toString,k=D.hasOwnProperty,le=D.toString,Tn=RegExp("^"+Ut.call(k).replace(fn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rt=ae.Symbol,Gn=Lt(Object.getPrototypeOf,Object),Mn=D.propertyIsEnumerable,Nn=jn.splice,Dt=Rt?Rt.isConcatSpreadable:void 0,ie=Object.getOwnPropertySymbols,Ht=Math.max,Fn=Qt(ae,"Map"),T=Qt(Object,"create");function O(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $n(){this.__data__=T?T(null):{}}function zn(e){return this.has(e)&&delete this.__data__[e]}function En(e){var t=this.__data__;if(T){var r=t[e];return r===se?void 0:r}return k.call(t,e)?t[e]:void 0}function Rn(e){var t=this.__data__;return T?t[e]!==void 0:k.call(t,e)}function Dn(e,t){var r=this.__data__;return r[e]=T&&t===void 0?se:t,this}O.prototype.clear=$n;O.prototype.delete=zn;O.prototype.get=En;O.prototype.has=Rn;O.prototype.set=Dn;function I(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Hn(){this.__data__=[]}function Wn(e){var t=this.__data__,r=H(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Nn.call(t,r,1),!0}function Bn(e){var t=this.__data__,r=H(t,e);return r<0?void 0:t[r][1]}function Ln(e){return H(this.__data__,e)>-1}function Un(e,t){var r=this.__data__,n=H(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}I.prototype.clear=Hn;I.prototype.delete=Wn;I.prototype.get=Bn;I.prototype.has=Ln;I.prototype.set=Un;function P(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Jn(){this.__data__={hash:new O,map:new(Fn||I),string:new O}}function Qn(e){return W(this,e).delete(e)}function Kn(e){return W(this,e).get(e)}function Vn(e){return W(this,e).has(e)}function qn(e,t){return W(this,e).set(e,t),this}P.prototype.clear=Jn;P.prototype.delete=Qn;P.prototype.get=Kn;P.prototype.has=Vn;P.prototype.set=qn;function R(e){var t=-1,r=e?e.length:0;for(this.__data__=new P;++t<r;)this.add(e[t])}function Yn(e){return this.__data__.set(e,se),this}function Xn(e){return this.__data__.has(e)}R.prototype.add=R.prototype.push=Yn;R.prototype.has=Xn;function Zn(e,t){var r=pe(e)||Kt(e)?_n(e.length,String):[],n=r.length,i=!!n;for(var o in e)(t||k.call(e,o))&&!(i&&(o=="length"||mo(o,n)))&&r.push(o);return r}function H(e,t){for(var r=e.length;r--;)if(bo(e[r][0],t))return r;return-1}function eo(e,t,r,n){var i=-1,o=bn,s=!0,a=e.length,c=[],p=t.length;if(!a)return c;r&&(t=Bt(t,Cn(r))),n?(o=On,s=!1):t.length>=an&&(o=kn,s=!1,t=new R(t));e:for(;++i<a;){var d=e[i],g=r?r(d):d;if(d=n||d!==0?d:0,s&&g===g){for(var m=p;m--;)if(t[m]===g)continue e;c.push(d)}else o(t,g,n)||c.push(d)}return c}function Jt(e,t,r,n,i){var o=-1,s=e.length;for(r||(r=po),i||(i=[]);++o<s;){var a=e[o];t>0&&r(a)?t>1?Jt(a,t-1,r,n,i):ce(i,a):n||(i[i.length]=a)}return i}function to(e,t,r){var n=t(e);return pe(e)?n:ce(n,r(e))}function ro(e){if(!me(e)||fo(e))return!1;var t=qt(e)||Pn(e)?Tn:dn;return t.test(wo(e))}function no(e){if(!me(e))return ho(e);var t=go(e),r=[];for(var n in e)n=="constructor"&&(t||!k.call(e,n))||r.push(n);return r}function oo(e,t){return e=Object(e),io(e,t,function(r,n){return n in e})}function io(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var s=t[n],a=e[s];r(a,s)&&(o[s]=a)}return o}function so(e,t){return t=Ht(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,i=Ht(r.length-t,0),o=Array(i);++n<i;)o[n]=r[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=r[n];return s[t]=o,wn(e,this,s)}}function ao(e){return to(e,So,lo)}function W(e,t){var r=e.__data__;return uo(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Qt(e,t){var r=In(e,t);return ro(r)?r:void 0}var co=ie?Lt(ie,Object):Xt,lo=ie?function(e){for(var t=[];e;)ce(t,co(e)),e=Gn(e);return t}:Xt;function po(e){return pe(e)||Kt(e)||!!(Dt&&e&&e[Dt])}function mo(e,t){return t=t==null?Wt:t,!!t&&(typeof e=="number"||gn.test(e))&&e>-1&&e%1==0&&e<t}function uo(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function fo(e){return!!Et&&Et in e}function go(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||D;return e===r}function ho(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}function yo(e){if(typeof e=="string"||xo(e))return e;var t=e+"";return t=="0"&&1/e==-cn?"-0":t}function wo(e){if(e!=null){try{return Ut.call(e)}catch (e3){}try{return e+""}catch (e4){}}return""}function bo(e,t){return e===t||e!==e&&t!==t}function Kt(e){return Oo(e)&&k.call(e,"callee")&&(!Mn.call(e,"callee")||le.call(e)==ln)}var pe=Array.isArray;function Vt(e){return e!=null&&vo(e.length)&&!qt(e)}function Oo(e){return Yt(e)&&Vt(e)}function qt(e){var t=me(e)?le.call(e):"";return t==pn||t==mn}function vo(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Wt}function me(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Yt(e){return!!e&&typeof e=="object"}function xo(e){return typeof e=="symbol"||Yt(e)&&le.call(e)==un}function So(e){return Vt(e)?Zn(e,!0):no(e)}var _o=so(function(e,t){return e==null?{}:(t=Bt(Jt(t,1),yo),oo(e,eo(ao(e),t)))});function Xt(){return[]}Zt.exports=_o});var _angular = require('@orval/angular'); var _angular2 = _interopRequireDefault(_angular);var _axios = require('@orval/axios'); var _axios2 = _interopRequireDefault(_axios);var _msw = require('@orval/msw');var _query = require('@orval/query'); var _query2 = _interopRequireDefault(_query);var _swr = require('@orval/swr'); var _swr2 = _interopRequireDefault(_swr);var G,rr,M,nr,or,ir,sr,To,ar,cr=y(()=>{"use strict";G=_core.OutputClient.AXIOS,rr={axios:_axios2.default.call(void 0, {type:"axios"})(),"axios-functions":_axios2.default.call(void 0, {type:"axios-functions"})(),angular:_angular2.default.call(void 0, )(),"react-query":_query2.default.call(void 0, {type:"react-query"})(),"svelte-query":_query2.default.call(void 0, {type:"svelte-query"})(),"vue-query":_query2.default.call(void 0, {type:"vue-query"})(),swr:_swr2.default.call(void 0, )()},M=e=>{let t=_core.isFunction.call(void 0, e)?e(rr):rr[e];if(!t)throw`Oups... \u{1F37B}. Client not found: ${e}`;return t},nr=({client:e=G,implementation:t,imports:r,specsName:n,hasSchemaDir:i,isAllowSyntheticDefaultImports:o,hasGlobalMutator:s,packageJson:a})=>{let{dependencies:c}=M(e);return _core.generateDependencyImports.call(void 0, t,c?[...c(s,a),...r]:r,n,i,o)},or=({outputClient:e=G,isRequestOptions:t,isGlobalMutator:r,isMutator:n,provideIn:i,hasAwaitedType:o,titles:s})=>{let{header:a}=M(e);return{implementation:a?a({title:s.implementation,isRequestOptions:t,isGlobalMutator:r,isMutator:n,provideIn:i,hasAwaitedType:o}):"",implementationMSW:`export const ${s.implementationMSW} = () => [
`}},ir=({outputClient:e=G,operationNames:t,hasMutator:r,hasAwaitedType:n,titles:i})=>{let{footer:o}=M(e);if(!o)return{implementation:"",implementationMSW:`]
`};let s;try{_core.isFunction.call(void 0, e)?(s=o(t),console.warn("[WARN] Passing an array of strings for operations names to the footer function is deprecated and will be removed in a future major release. Please pass them in an object instead: { operationNames: string[] }.")):s=o({operationNames:t,title:i.implementation,hasMutator:r,hasAwaitedType:n})}catch (e5){s=o({operationNames:t,title:i.implementation,hasMutator:r,hasAwaitedType:n})}return{implementation:s,implementationMSW:`]
`}},sr=({outputClient:e=G,title:t,customTitleFunc:r})=>{let{title:n}=M(e);if(!n)return{implementation:"",implementationMSW:`get${_core.pascal.call(void 0, t)}MSW`};if(r){let i=r(t);return{implementation:n(i),implementationMSW:`get${_core.pascal.call(void 0, i)}MSW`}}return{implementation:n(t),implementationMSW:`get${_core.pascal.call(void 0, t)}MSW`}},To=(e,t)=>t.mock?_core.isFunction.call(void 0, t.mock)?t.mock(e,t):_msw.generateMSW.call(void 0, e,t):{implementation:{function:"",handler:""},imports:[]},ar=(e=G,t,r)=>_core.asyncReduce.call(void 0, t,async(n,i)=>{let{client:o}=M(e),s=await o(i,r,e),a=To(i,r);return n[i.operationId]={implementation:i.doc+s.implementation,imports:s.imports,implementationMSW:a.implementation,importsMSW:a.imports,tags:i.tags,mutator:i.mutator,clientMutators:s.mutators,formData:i.formData,formUrlEncoded:i.formUrlEncoded,operationName:i.operationName},n},{})});var lr,pr=y(()=>{"use strict";cr();lr=async({output:e,context:t})=>{let r=await _core.asyncReduce.call(void 0, Object.entries(t.specs[t.specKey].paths),async(n,[i,o])=>{let s=_core.getRoute.call(void 0, i),a=o,c=t;if(_core.isReference.call(void 0, o)){let{schema:m,imports:l}=_core.resolveRef.call(void 0, o,t);a=m,c={...t,...l.length?{specKey:l[0].specKey}:{}}}let p=await _core.generateVerbsOptions.call(void 0, {verbs:a,output:e,route:s,context:c});e.override.useDeprecatedOperations===!1&&(p=p.filter(m=>!m.deprecated));let d=p.reduce((m,{queryParams:l,headers:f,body:u,response:h})=>(l&&m.push(l.schema,...l.deps),f&&m.push(f.schema,...f.deps),m.push(...u.schemas),m.push(...h.schemas),m),[]),g=await ar(e.client,p,{route:s,pathRoute:i,override:e.override,context:c,mock:!!e.mock,output:e.target});return n.schemas.push(...d),n.operations={...n.operations,...g},n},{operations:{},schemas:[]});return{operations:r.operations,schemas:r.schemas,title:sr,header:or,footer:ir,imports:nr,importsMock:_msw.generateMSWImports}}});var ge,ye,Qo,Ko,he,fr=y(()=>{"use strict";ge=x(er());pr();ye=async({data:e,input:t,output:r,target:n,workspace:i})=>{var c;let o=await Qo({specs:e,input:t,workspace:i}),s=Ko({output:r,target:n,workspace:i,specs:o}),a=await lr({output:r,context:{specKey:n,target:n,workspace:i,specs:o,override:r.override,tslint:r.tslint,tsconfig:r.tsconfig,packageJson:r.packageJson}});return{...a,schemas:{...s,[n]:[...(c=s[n])!=null?c:[],...a.schemas]},target:n,info:o[n].info}},Qo=async({specs:e,input:t,workspace:r})=>{var i;let n=(i=t.override)!=null&&i.transformer?await _core.dynamicImport.call(void 0, t.override.transformer,r):void 0;return _core.asyncReduce.call(void 0, Object.entries(e),async(o,[s,a])=>{let c=await _core.openApiConverter.call(void 0, a,t.converterOptions,s),p=n?n(c):c;return t.validation&&await _core.ibmOpenapiValidator.call(void 0, p),o[s]=p,o},{})},Ko=({output:e,target:t,workspace:r,specs:n})=>Object.entries(n).reduce((i,[o,s])=>{var l,f,u,h;let a={specKey:o,target:t,workspace:r,specs:n,override:e.override,tslint:e.tslint,tsconfig:e.tsconfig,packageJson:e.packageJson},c=_core.generateSchemasDefinition.call(void 0, s.openapi?(l=s.components)==null?void 0:l.schemas:he(s,o),a,e.override.components.schemas.suffix),p=_core.generateComponentDefinition.call(void 0, (f=s.components)==null?void 0:f.responses,a,e.override.components.responses.suffix),d=_core.generateComponentDefinition.call(void 0, (u=s.components)==null?void 0:u.requestBodies,a,e.override.components.requestBodies.suffix),g=_core.generateParameterDefinition.call(void 0, (h=s.components)==null?void 0:h.parameters,a,e.override.components.parameters.suffix),m=[...c,...p,...d,...g];return m.length&&(i[o]=m),i},{}),he=(e,t)=>{var i;let r=(0,ge.default)(e,["openapi","info","servers","paths","components","security","tags","externalDocs"]);return t&&_core.isSchema.call(void 0, r)?{[_core.upath.getSchemaFileName(t)]:r,...he((0,ge.default)(r,["type","properties","allOf","oneOf","anyOf","items"]))}:{...Object.entries(r).reduce((o,[s,a])=>_core.isObject.call(void 0, a)?!_core.isSchema.call(void 0, a)&&!_core.isReference.call(void 0, a)?{...o,...he(a)}:(o[s]=a,o):o,{}),...(i=e==null?void 0:e.components)==null?void 0:i.schemas}}});var _swaggerparser = require('@apidevtools/swagger-parser'); var _swaggerparser2 = _interopRequireDefault(_swaggerparser);var ei,gr,hr=y(()=>{"use strict";fr();ei=async(e,{validate:t,...r},n)=>{if(t)try{await _swaggerparser2.default.validate(e,r)}catch(o){if((o==null?void 0:o.name)==="ParserError")throw o;_core.log.call(void 0, `\u26A0\uFE0F  ${_chalk2.default.yellow(o)}`)}let i=(await _swaggerparser2.default.resolve(e,r)).values();return n?i:Object.fromEntries(Object.entries(i).map(([o,s])=>[_core.upath.resolve(o),s]))},gr=async(e,t)=>{let{input:r,output:n}=t;if(_core.isObject.call(void 0, r.target))return ye({data:{[e]:r.target},input:r,output:n,target:e,workspace:e});let i=_core.isUrl.call(void 0, r.target),o=await ei(r.target,r.parserOptions,i);return ye({data:o,input:r,output:n,target:r.target,workspace:e})}});var _execa = require('execa'); var _execa2 = _interopRequireDefault(_execa);var _stringargv = require('string-argv');var br,Or=y(()=>{"use strict";br=async(e,t=[],r=[])=>{_core.log.call(void 0, _chalk2.default.white(`Running ${e} hook...`));for(let n of t)if(_core.isString.call(void 0, n)){let[i,...o]=[..._stringargv.parseArgsStringToArgv.call(void 0, n),...r];try{await _execa2.default.call(void 0, i,o)}catch(s){_core.log.call(void 0, _chalk2.default.red(`\u{1F6D1} Failed to run ${e} hook: ${s}`))}}else _core.isFunction.call(void 0, n)&&await n(r)}});var vr=y(()=>{"use strict";Or();K();A();V();U();q();ne()});var _lodashuniq = require('lodash.uniq'); var _lodashuniq2 = _interopRequireDefault(_lodashuniq);var gi,_r,hi,Cr=y(()=>{"use strict";vr();gi=(e,t)=>{if(!e)return"";let r=e(t);return Array.isArray(r)?_core.jsDoc.call(void 0, {description:r}):r},_r=async(e,t,r,n)=>{let{info:i,schemas:o,target:s}=e,{output:a}=r,c=n||i.title,p=Object.keys(o).reduce((l,f)=>{let h=_core.upath.getSpecName(f,s).slice(1).split("/").join("-");return l[f]=h,l},{}),d=gi(a.override.header,i);if(a.schemas){let l=a.schemas;await Promise.all(Object.entries(o).map(([f,u])=>{let h=_core.isRootKey.call(void 0, f,s)?l:_core.upath.join(l,p[f]);return _core.writeSchemas.call(void 0, {schemaPath:h,schemas:u,target:s,specsName:p,specKey:f,isRootKey:_core.isRootKey.call(void 0, f,s),header:d})}))}let g=[];if(a.target&&(g=await hi(a.mode)({builder:e,workspace:t,output:a,specsName:p,header:d})),a.workspace){let l=a.workspace,f=g.filter(h=>!h.endsWith(".msw.ts")).map(h=>_core.upath.relativeSafe(l,_core.getFileInfo.call(void 0, h).pathWithoutExtension));a.schemas&&f.push(_core.upath.relativeSafe(l,_core.getFileInfo.call(void 0, a.schemas).dirname));let u=_core.upath.join(l,"/index.ts");if(await _fsextra2.default.pathExists(u)){let h=await _fsextra2.default.readFile(u,"utf8"),F=f.filter(v=>!h.includes(v));await _fsextra2.default.appendFile(u,_lodashuniq2.default.call(void 0, F).map(v=>`export * from '${v}';`).join(`
`)+`
`)}else await _fsextra2.default.outputFile(u,_lodashuniq2.default.call(void 0, f).map(h=>`export * from '${h}';`).join(`
`)+`
`);g=[u,...g]}let m=[...a.schemas?[_core.getFileInfo.call(void 0, a.schemas).dirname]:[],...g];if(r.hooks.afterAllFilesWrite&&await br("afterAllFilesWrite",r.hooks.afterAllFilesWrite,m),a.prettier)try{await _execa2.default.call(void 0, "prettier",["--write",...m])}catch (e6){_core.log.call(void 0, _chalk2.default.yellow(`\u26A0\uFE0F  ${c?`${c} - `:""}Prettier not found`))}_core.createSuccessMessage.call(void 0, c)},hi=e=>{switch(e){case _core.OutputMode.SPLIT:return _core.writeSplitMode;case _core.OutputMode.TAGS:return _core.writeTagsMode;case _core.OutputMode.TAGS_SPLIT:return _core.writeSplitTagsMode;case _core.OutputMode.SINGLE:default:return _core.writeSingleMode}}});var jr,Ar,Ea,xi= exports.k =y(()=>{"use strict";hr();A();ne();Cr();jr= exports.i =async(e,t,r)=>{if(t.output.clean){let i=Array.isArray(t.output.clean)?t.output.clean:[];t.output.target&&await _core.removeFiles.call(void 0, ["**/*","!**/*.d.ts",...i],_core.getFileInfo.call(void 0, t.output.target).dirname),t.output.schemas&&await _core.removeFiles.call(void 0, ["**/*","!**/*.d.ts",...i],_core.getFileInfo.call(void 0, t.output.schemas).dirname),_core.log.call(void 0, `${r?`${r}: `:""}Cleaning output folder`)}let n=await gr(e,t);await _r(n,e,t,r)},Ar=async(e,t,r)=>{if(r){let n=e[r];if(n)try{await jr(t,n,r)}catch(i){_core.log.call(void 0, _chalk2.default.red(`\u{1F6D1}  ${r?`${r} - `:""}${i}`))}else _core.errorMessage.call(void 0, "Project not found"),process.exit(1);return}return _core.asyncReduce.call(void 0, Object.entries(e),async(n,[i,o])=>{try{n.push(await jr(t,o,i))}catch(s){_core.log.call(void 0, _chalk2.default.red(`\u{1F6D1}  ${i?`${i} - `:""}${s}`))}return n},[])},Ea= exports.j =async(e,t)=>{let{path:r,file:n,error:i}=await _core.loadFile.call(void 0, e,{defaultFileName:"orval.config"});if(!n)throw`failed to load from ${r} => ${i}`;let o=_core.upath.dirname(r),s=await(_core.isFunction.call(void 0, n)?n():n),a=await _core.asyncReduce.call(void 0, Object.entries(s),async(p,[d,g])=>(p[d]=await Ft(g,o,t),p),{}),c=Object.entries(a).filter(([p])=>(t==null?void 0:t.projectName)===void 0||p===(t==null?void 0:t.projectName)).map(([,{input:p}])=>p.target).filter(p=>_core.isString.call(void 0, p));(t==null?void 0:t.watch)&&c.length?zt(t==null?void 0:t.watch,()=>Ar(a,o,t==null?void 0:t.projectName),c):await Ar(a,o,t==null?void 0:t.projectName)}});exports.a = kt; exports.b = x; exports.c = It; exports.d = ls; exports.e = Ft; exports.f = A; exports.g = zt; exports.h = ne; exports.i = jr; exports.j = Ea; exports.k = xi;
